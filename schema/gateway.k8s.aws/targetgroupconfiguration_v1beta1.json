{
  "description": "TargetGroupConfiguration is the Schema for defining TargetGroups with an AWS ELB Gateway",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "TargetGroupConfigurationSpec defines the TargetGroup properties for a route.",
      "type": "object",
      "required": [
        "targetReference"
      ],
      "properties": {
        "defaultConfiguration": {
          "description": "defaultRouteConfiguration fallback configuration applied to all routes, unless overridden by route-specific configurations.",
          "type": "object",
          "properties": {
            "enableMultiCluster": {
              "description": "EnableMultiCluster [Application / Network LoadBalancer]\nAllows for multiple Clusters / Services to use the generated TargetGroup ARN",
              "type": "boolean"
            },
            "healthCheckConfig": {
              "description": "healthCheckConfig The Health Check configuration for this backend.",
              "type": "object",
              "properties": {
                "healthCheckInterval": {
                  "description": "healthCheckInterval The approximate amount of time, in seconds, between health checks of an individual target.",
                  "type": "integer",
                  "format": "int32"
                },
                "healthCheckPath": {
                  "description": "healthCheckPath The destination for health checks on the targets.",
                  "type": "string"
                },
                "healthCheckPort": {
                  "description": "healthCheckPort The port the load balancer uses when performing health checks on targets.\nThe default is to use the port on which each target receives traffic from the load balancer.",
                  "type": "string"
                },
                "healthCheckProtocol": {
                  "description": "healthCheckProtocol The protocol to use to connect with the target. The GENEVE, TLS, UDP, and TCP_UDP protocols are not supported for health checks.",
                  "type": "string",
                  "enum": [
                    "HTTP",
                    "HTTPS",
                    "TCP"
                  ]
                },
                "healthCheckTimeout": {
                  "description": "healthCheckTimeout The amount of time, in seconds, during which no response means a failed health check",
                  "type": "integer",
                  "format": "int32"
                },
                "healthyThresholdCount": {
                  "description": "healthyThresholdCount The number of consecutive health checks successes required before considering an unhealthy target healthy.",
                  "type": "integer",
                  "format": "int32"
                },
                "matcher": {
                  "description": "healthCheckCodes The HTTP or gRPC codes to use when checking for a successful response from a target",
                  "type": "object",
                  "properties": {
                    "grpcCode": {
                      "description": "The gRPC codes",
                      "type": "string"
                    },
                    "httpCode": {
                      "description": "The HTTP codes.",
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "unhealthyThresholdCount": {
                  "description": "unhealthyThresholdCount The number of consecutive health check failures required before considering the target unhealthy.",
                  "type": "integer",
                  "format": "int32"
                }
              },
              "additionalProperties": false
            },
            "ipAddressType": {
              "description": "ipAddressType specifies whether the target group is of type IPv4 or IPv6. If unspecified, it will be automatically inferred.",
              "type": "string",
              "enum": [
                "ipv4",
                "ipv6"
              ]
            },
            "nodeSelector": {
              "description": "node selector for instance type target groups to only register certain nodes",
              "type": "object",
              "properties": {
                "matchExpressions": {
                  "description": "matchExpressions is a list of label selector requirements. The requirements are ANDed.",
                  "type": "array",
                  "items": {
                    "description": "A label selector requirement is a selector that contains values, a key, and an operator that\nrelates the key and values.",
                    "type": "object",
                    "required": [
                      "key",
                      "operator"
                    ],
                    "properties": {
                      "key": {
                        "description": "key is the label key that the selector applies to.",
                        "type": "string"
                      },
                      "operator": {
                        "description": "operator represents a key's relationship to a set of values.\nValid operators are In, NotIn, Exists and DoesNotExist.",
                        "type": "string"
                      },
                      "values": {
                        "description": "values is an array of string values. If the operator is In or NotIn,\nthe values array must be non-empty. If the operator is Exists or DoesNotExist,\nthe values array must be empty. This array is replaced during a strategic\nmerge patch.",
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "x-kubernetes-list-type": "atomic"
                      }
                    },
                    "additionalProperties": false
                  },
                  "x-kubernetes-list-type": "atomic"
                },
                "matchLabels": {
                  "description": "matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels\nmap is equivalent to an element of matchExpressions, whose key field is \"key\", the\noperator is \"In\", and the values array contains only \"value\". The requirements are ANDed.",
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false,
              "x-kubernetes-map-type": "atomic"
            },
            "protocol": {
              "description": "Protocol [Application / Network Load Balancer] the protocol for the target group.\nIf unspecified, it will be automatically inferred.",
              "type": "string",
              "enum": [
                "HTTP",
                "HTTPS",
                "TCP",
                "TLS",
                "UDP",
                "TCP_UDP"
              ]
            },
            "protocolVersion": {
              "description": "protocolVersion [HTTP/HTTPS protocol] The protocol version. The possible values are GRPC , HTTP1 and HTTP2",
              "type": "string",
              "enum": [
                "HTTP1",
                "HTTP2",
                "GRPC"
              ]
            },
            "tags": {
              "description": "Tags the Tags to add on the target group.",
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "targetControlPort": {
              "description": "targetControlPort [Application Load Balancer] The port on which the target communicates its capacity. This value can't be modified after target group creation.",
              "type": "integer",
              "format": "int32"
            },
            "targetGroupAttributes": {
              "description": "targetGroupAttributes defines the attribute of target group",
              "type": "array",
              "items": {
                "description": "TargetGroupAttribute defines target group attribute.",
                "type": "object",
                "required": [
                  "key",
                  "value"
                ],
                "properties": {
                  "key": {
                    "description": "The key of the attribute.",
                    "type": "string"
                  },
                  "value": {
                    "description": "The value of the attribute.",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "targetGroupName": {
              "description": "targetGroupName specifies the name to assign to the Target Group. If not defined, then one is generated.",
              "type": "string"
            },
            "targetType": {
              "description": "targetType is the TargetType of TargetGroup. If unspecified, it will be automatically inferred as instance.",
              "type": "string",
              "enum": [
                "instance",
                "ip"
              ]
            }
          },
          "additionalProperties": false
        },
        "routeConfigurations": {
          "description": "routeConfigurations the route configuration for specific routes. the longest prefix match (kind:namespace:name) is taken to combine with the default properties.",
          "type": "array",
          "items": {
            "description": "RouteConfiguration defines the per route configuration",
            "type": "object",
            "required": [
              "routeIdentifier",
              "targetGroupProps"
            ],
            "properties": {
              "routeIdentifier": {
                "description": "name the identifier of the route, it should be in the form of ROUTE:NAMESPACE:NAME",
                "type": "object",
                "properties": {
                  "kind": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "namespace": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "targetGroupProps": {
                "description": "targetGroupProps the target group specific properties",
                "type": "object",
                "properties": {
                  "enableMultiCluster": {
                    "description": "EnableMultiCluster [Application / Network LoadBalancer]\nAllows for multiple Clusters / Services to use the generated TargetGroup ARN",
                    "type": "boolean"
                  },
                  "healthCheckConfig": {
                    "description": "healthCheckConfig The Health Check configuration for this backend.",
                    "type": "object",
                    "properties": {
                      "healthCheckInterval": {
                        "description": "healthCheckInterval The approximate amount of time, in seconds, between health checks of an individual target.",
                        "type": "integer",
                        "format": "int32"
                      },
                      "healthCheckPath": {
                        "description": "healthCheckPath The destination for health checks on the targets.",
                        "type": "string"
                      },
                      "healthCheckPort": {
                        "description": "healthCheckPort The port the load balancer uses when performing health checks on targets.\nThe default is to use the port on which each target receives traffic from the load balancer.",
                        "type": "string"
                      },
                      "healthCheckProtocol": {
                        "description": "healthCheckProtocol The protocol to use to connect with the target. The GENEVE, TLS, UDP, and TCP_UDP protocols are not supported for health checks.",
                        "type": "string",
                        "enum": [
                          "HTTP",
                          "HTTPS",
                          "TCP"
                        ]
                      },
                      "healthCheckTimeout": {
                        "description": "healthCheckTimeout The amount of time, in seconds, during which no response means a failed health check",
                        "type": "integer",
                        "format": "int32"
                      },
                      "healthyThresholdCount": {
                        "description": "healthyThresholdCount The number of consecutive health checks successes required before considering an unhealthy target healthy.",
                        "type": "integer",
                        "format": "int32"
                      },
                      "matcher": {
                        "description": "healthCheckCodes The HTTP or gRPC codes to use when checking for a successful response from a target",
                        "type": "object",
                        "properties": {
                          "grpcCode": {
                            "description": "The gRPC codes",
                            "type": "string"
                          },
                          "httpCode": {
                            "description": "The HTTP codes.",
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      },
                      "unhealthyThresholdCount": {
                        "description": "unhealthyThresholdCount The number of consecutive health check failures required before considering the target unhealthy.",
                        "type": "integer",
                        "format": "int32"
                      }
                    },
                    "additionalProperties": false
                  },
                  "ipAddressType": {
                    "description": "ipAddressType specifies whether the target group is of type IPv4 or IPv6. If unspecified, it will be automatically inferred.",
                    "type": "string",
                    "enum": [
                      "ipv4",
                      "ipv6"
                    ]
                  },
                  "nodeSelector": {
                    "description": "node selector for instance type target groups to only register certain nodes",
                    "type": "object",
                    "properties": {
                      "matchExpressions": {
                        "description": "matchExpressions is a list of label selector requirements. The requirements are ANDed.",
                        "type": "array",
                        "items": {
                          "description": "A label selector requirement is a selector that contains values, a key, and an operator that\nrelates the key and values.",
                          "type": "object",
                          "required": [
                            "key",
                            "operator"
                          ],
                          "properties": {
                            "key": {
                              "description": "key is the label key that the selector applies to.",
                              "type": "string"
                            },
                            "operator": {
                              "description": "operator represents a key's relationship to a set of values.\nValid operators are In, NotIn, Exists and DoesNotExist.",
                              "type": "string"
                            },
                            "values": {
                              "description": "values is an array of string values. If the operator is In or NotIn,\nthe values array must be non-empty. If the operator is Exists or DoesNotExist,\nthe values array must be empty. This array is replaced during a strategic\nmerge patch.",
                              "type": "array",
                              "items": {
                                "type": "string"
                              },
                              "x-kubernetes-list-type": "atomic"
                            }
                          },
                          "additionalProperties": false
                        },
                        "x-kubernetes-list-type": "atomic"
                      },
                      "matchLabels": {
                        "description": "matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels\nmap is equivalent to an element of matchExpressions, whose key field is \"key\", the\noperator is \"In\", and the values array contains only \"value\". The requirements are ANDed.",
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      }
                    },
                    "additionalProperties": false,
                    "x-kubernetes-map-type": "atomic"
                  },
                  "protocol": {
                    "description": "Protocol [Application / Network Load Balancer] the protocol for the target group.\nIf unspecified, it will be automatically inferred.",
                    "type": "string",
                    "enum": [
                      "HTTP",
                      "HTTPS",
                      "TCP",
                      "TLS",
                      "UDP",
                      "TCP_UDP"
                    ]
                  },
                  "protocolVersion": {
                    "description": "protocolVersion [HTTP/HTTPS protocol] The protocol version. The possible values are GRPC , HTTP1 and HTTP2",
                    "type": "string",
                    "enum": [
                      "HTTP1",
                      "HTTP2",
                      "GRPC"
                    ]
                  },
                  "tags": {
                    "description": "Tags the Tags to add on the target group.",
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  },
                  "targetControlPort": {
                    "description": "targetControlPort [Application Load Balancer] The port on which the target communicates its capacity. This value can't be modified after target group creation.",
                    "type": "integer",
                    "format": "int32"
                  },
                  "targetGroupAttributes": {
                    "description": "targetGroupAttributes defines the attribute of target group",
                    "type": "array",
                    "items": {
                      "description": "TargetGroupAttribute defines target group attribute.",
                      "type": "object",
                      "required": [
                        "key",
                        "value"
                      ],
                      "properties": {
                        "key": {
                          "description": "The key of the attribute.",
                          "type": "string"
                        },
                        "value": {
                          "description": "The value of the attribute.",
                          "type": "string"
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "targetGroupName": {
                    "description": "targetGroupName specifies the name to assign to the Target Group. If not defined, then one is generated.",
                    "type": "string"
                  },
                  "targetType": {
                    "description": "targetType is the TargetType of TargetGroup. If unspecified, it will be automatically inferred as instance.",
                    "type": "string",
                    "enum": [
                      "instance",
                      "ip"
                    ]
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }
        },
        "targetReference": {
          "description": "targetReference the kubernetes object to attach the Target Group settings to.",
          "type": "object",
          "required": [
            "name"
          ],
          "properties": {
            "group": {
              "description": "Group is the group of the referent. For example, \"gateway.networking.k8s.io\".\nWhen unspecified or empty string, core API group is inferred.",
              "type": "string",
              "default": ""
            },
            "kind": {
              "description": "Kind is the Kubernetes resource kind of the referent. For example\n\"Service\".\n\nDefaults to \"Service\" when not specified.",
              "type": "string",
              "default": "Service"
            },
            "name": {
              "description": "Name is the name of the referent.",
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "TargetGroupConfigurationStatus defines the observed state of TargetGroupConfiguration",
      "type": "object",
      "properties": {
        "observedGatewayClassConfigurationGeneration": {
          "description": "The generation of the Gateway Configuration attached to the GatewayClass object.",
          "type": "integer",
          "format": "int64"
        },
        "observedGatewayConfigurationGeneration": {
          "description": "The generation of the Gateway Configuration attached to the Gateway object.",
          "type": "integer",
          "format": "int64"
        }
      },
      "additionalProperties": false
    }
  }
}

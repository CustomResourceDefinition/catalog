{
  "description": "APIVersion defines a version of an API.",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "The desired behavior of this APIVersion.",
      "type": "object",
      "required": [
        "release"
      ],
      "properties": {
        "cors": {
          "description": "Cors defines the Cross-Origin Resource Sharing configuration.",
          "type": "object",
          "properties": {
            "addVaryHeader": {
              "description": "AddVaryHeader defines whether the Vary header is automatically added/updated when the AllowOriginsList is set.",
              "type": "boolean"
            },
            "allowCredentials": {
              "description": "AllowCredentials defines whether the request can include user credentials.",
              "type": "boolean"
            },
            "allowHeadersList": {
              "description": "AllowHeadersList defines the Access-Control-Request-Headers values sent in preflight response.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "allowMethodsList": {
              "description": "AllowMethodsList defines the Access-Control-Request-Method values sent in preflight response.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "allowOriginListRegex": {
              "description": "AllowOriginListRegex is a list of allowable origins written following the Regular Expression syntax (https://golang.org/pkg/regexp/).",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "allowOriginsList": {
              "description": "AllowOriginsList is a list of allowable origins. Can also be a wildcard origin \"*\".",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "exposeHeadersList": {
              "description": "ExposeHeadersList defines the Access-Control-Expose-Headers values sent in preflight response.",
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "maxAge": {
              "description": "MaxAge defines the time that a preflight request may be cached.",
              "type": "integer",
              "format": "int64"
            }
          },
          "additionalProperties": false
        },
        "description": {
          "description": "Description explains what the APIVersion does.",
          "type": "string"
        },
        "openApiSpec": {
          "description": "OpenAPISpec defines the API contract as an OpenAPI specification.",
          "type": "object",
          "properties": {
            "operationSets": {
              "description": "OperationSets defines the sets of operations to be referenced for granular filtering in APICatalogItems or ManagedSubscriptions.",
              "type": "array",
              "maxItems": 100,
              "items": {
                "description": "OperationSet gives a name to a set of matching OpenAPI operations.\nThis set of operations can then be referenced for granular filtering in APICatalogItems or ManagedSubscriptions.",
                "type": "object",
                "required": [
                  "matchers",
                  "name"
                ],
                "properties": {
                  "matchers": {
                    "description": "Matchers defines a list of alternative rules for matching OpenAPI operations.",
                    "type": "array",
                    "maxItems": 100,
                    "minItems": 1,
                    "items": {
                      "description": "OperationMatcher defines criteria for matching an OpenAPI operation.",
                      "type": "object",
                      "minProperties": 1,
                      "properties": {
                        "methods": {
                          "description": "Methods specifies the HTTP methods to be included for selection.",
                          "type": "array",
                          "maxItems": 10,
                          "items": {
                            "type": "string"
                          }
                        },
                        "path": {
                          "description": "Path specifies the exact path of the operations to select.",
                          "type": "string",
                          "maxLength": 255,
                          "x-kubernetes-validations": [
                            {
                              "rule": "self.startsWith('/')",
                              "message": "must start with a '/'"
                            },
                            {
                              "rule": "!self.matches(r\"\"\"(\\/\\.\\.\\/)|(\\/\\.\\.$)\"\"\")",
                              "message": "cannot contains '../'"
                            }
                          ]
                        },
                        "pathPrefix": {
                          "description": "PathPrefix specifies the path prefix of the operations to select.",
                          "type": "string",
                          "maxLength": 255,
                          "x-kubernetes-validations": [
                            {
                              "rule": "self.startsWith('/')",
                              "message": "must start with a '/'"
                            },
                            {
                              "rule": "!self.matches(r\"\"\"(\\/\\.\\.\\/)|(\\/\\.\\.$)\"\"\")",
                              "message": "cannot contains '../'"
                            }
                          ]
                        },
                        "pathRegex": {
                          "description": "PathRegex specifies a regular expression pattern for matching operations based on their paths.",
                          "type": "string"
                        }
                      },
                      "additionalProperties": false,
                      "x-kubernetes-validations": [
                        {
                          "rule": "[has(self.path), has(self.pathPrefix), has(self.pathRegex)].filter(x, x).size() \u003c= 1",
                          "message": "path, pathPrefix and pathRegex are mutually exclusive"
                        }
                      ]
                    }
                  },
                  "name": {
                    "description": "Name is the name of the OperationSet to reference in APICatalogItems or ManagedSubscriptions.",
                    "type": "string",
                    "maxLength": 253
                  }
                },
                "additionalProperties": false
              }
            },
            "override": {
              "description": "Override holds data used to override OpenAPI specification.",
              "type": "object",
              "required": [
                "servers"
              ],
              "properties": {
                "servers": {
                  "type": "array",
                  "maxItems": 100,
                  "minItems": 1,
                  "items": {
                    "type": "object",
                    "required": [
                      "url"
                    ],
                    "properties": {
                      "url": {
                        "type": "string",
                        "x-kubernetes-validations": [
                          {
                            "rule": "isURL(self)",
                            "message": "must be a valid URL"
                          }
                        ]
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "additionalProperties": false
            },
            "path": {
              "description": "Path specifies the endpoint path within the Kubernetes Service where the OpenAPI specification can be obtained.\nThe Service queried is determined by the associated Ingress, IngressRoute, or HTTPRoute resource to which the API is attached.\nIt's important to note that this option is incompatible if the Ingress or IngressRoute specifies multiple backend services.\nThe Path must be accessible via a GET request method and should serve a YAML or JSON document containing the OpenAPI specification.",
              "type": "string",
              "maxLength": 255,
              "x-kubernetes-validations": [
                {
                  "rule": "self.startsWith('/')",
                  "message": "must start with a '/'"
                },
                {
                  "rule": "!self.matches(r\"\"\"(\\/\\.\\.\\/)|(\\/\\.\\.$)\"\"\")",
                  "message": "cannot contains '../'"
                }
              ]
            },
            "url": {
              "description": "URL is a Traefik Hub agent accessible URL for obtaining the OpenAPI specification.\nThe URL must be accessible via a GET request method and should serve a YAML or JSON document containing the OpenAPI specification.",
              "type": "string",
              "x-kubernetes-validations": [
                {
                  "rule": "isURL(self)",
                  "message": "must be a valid URL"
                }
              ]
            },
            "validateRequestMethodAndPath": {
              "description": "ValidateRequestMethodAndPath validates that the path and method matches an operation defined in the OpenAPI specification.\nThis option overrides the default behavior configured in the static configuration.",
              "type": "boolean"
            }
          },
          "additionalProperties": false,
          "x-kubernetes-validations": [
            {
              "rule": "has(self.path) || has(self.url)",
              "message": "path or url must be defined"
            }
          ]
        },
        "release": {
          "description": "Release is the version number of the API.\nThis value must follow the SemVer format: https://semver.org/",
          "type": "string",
          "maxLength": 100,
          "x-kubernetes-validations": [
            {
              "rule": "self.matches(r\"\"\"^v?(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$\"\"\")",
              "message": "must be a valid semver version"
            }
          ]
        },
        "title": {
          "description": "Title is the public facing name of the APIVersion.",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "The current status of this APIVersion.",
      "type": "object",
      "properties": {
        "hash": {
          "description": "Hash is a hash representing the APIVersion.",
          "type": "string"
        },
        "syncedAt": {
          "type": "string",
          "format": "date-time"
        },
        "version": {
          "type": "string"
        }
      },
      "additionalProperties": false
    }
  }
}

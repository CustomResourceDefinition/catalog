{
  "description": "PodNetworkChaos is the Schema for the PodNetworkChaos API",
  "type": "object",
  "required": [
    "spec"
  ],
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "Spec defines the behavior of a pod chaos experiment",
      "type": "object",
      "properties": {
        "ipsets": {
          "description": "The ipset on the pod",
          "type": "array",
          "items": {
            "description": "RawIPSet represents an ipset on specific pod",
            "type": "object",
            "required": [
              "ipsetType",
              "name",
              "source"
            ],
            "properties": {
              "cidrAndPorts": {
                "description": "The contents of ipset. Only available when IPSetType is NetPortIPSet.",
                "type": "array",
                "items": {
                  "description": "CidrAndPort represents CIDR and port pair",
                  "type": "object",
                  "required": [
                    "cidr",
                    "port"
                  ],
                  "properties": {
                    "cidr": {
                      "type": "string"
                    },
                    "port": {
                      "type": "integer",
                      "maximum": 65535,
                      "minimum": 1
                    }
                  },
                  "additionalProperties": false
                }
              },
              "cidrs": {
                "description": "The contents of ipset. Only available when IPSetType is NetIPSet.",
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "ipsetType": {
                "description": "IPSetType represents the type of IP set",
                "type": "string"
              },
              "name": {
                "description": "The name of ipset",
                "type": "string"
              },
              "setNames": {
                "description": "The contents of ipset. Only available when IPSetType is SetIPSet.",
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "source": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "iptables": {
          "description": "The iptables rules on the pod",
          "type": "array",
          "items": {
            "description": "RawIptables represents the iptables rules on specific pod",
            "type": "object",
            "required": [
              "direction",
              "name",
              "source"
            ],
            "properties": {
              "device": {
                "description": "Device represents the network device to be affected.",
                "type": "string"
              },
              "direction": {
                "description": "The block direction of this iptables rule",
                "type": "string"
              },
              "ipsets": {
                "description": "The name of related ipset",
                "type": "array",
                "items": {
                  "type": "string"
                },
                "nullable": true
              },
              "name": {
                "description": "The name of iptables chain",
                "type": "string"
              },
              "source": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "tcs": {
          "description": "The tc rules on the pod",
          "type": "array",
          "items": {
            "description": "RawTrafficControl represents the traffic control chaos on specific pod",
            "type": "object",
            "required": [
              "source",
              "type"
            ],
            "properties": {
              "bandwidth": {
                "description": "Bandwidth represents the detail about bandwidth control action",
                "type": "object",
                "required": [
                  "buffer",
                  "limit",
                  "rate"
                ],
                "properties": {
                  "buffer": {
                    "description": "Buffer is the maximum amount of bytes that tokens can be available for instantaneously.",
                    "type": "integer",
                    "format": "int32",
                    "minimum": 1
                  },
                  "limit": {
                    "description": "Limit is the number of bytes that can be queued waiting for tokens to become available.",
                    "type": "integer",
                    "format": "int32",
                    "minimum": 1
                  },
                  "minburst": {
                    "description": "Minburst specifies the size of the peakrate bucket. For perfect accuracy, should be set to the MTU of the interface.  If a peakrate is needed, but some burstiness is acceptable, this size can be raised. A 3000 byte minburst allows around 3mbit/s of peakrate, given 1000 byte packets.",
                    "type": "integer",
                    "format": "int32",
                    "minimum": 0
                  },
                  "peakrate": {
                    "description": "Peakrate is the maximum depletion rate of the bucket. The peakrate does not need to be set, it is only necessary if perfect millisecond timescale shaping is required.",
                    "type": "integer",
                    "format": "int64",
                    "minimum": 0
                  },
                  "rate": {
                    "description": "Rate is the speed knob. Allows bit, kbit, mbit, gbit, tbit, bps, kbps, mbps, gbps, tbps unit. bps means bytes per second.",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "corrupt": {
                "description": "Corrupt represents the detail about corrupt action",
                "type": "object",
                "required": [
                  "corrupt"
                ],
                "properties": {
                  "correlation": {
                    "type": "string"
                  },
                  "corrupt": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "delay": {
                "description": "Delay represents the detail about delay action",
                "type": "object",
                "required": [
                  "latency"
                ],
                "properties": {
                  "correlation": {
                    "type": "string"
                  },
                  "jitter": {
                    "type": "string"
                  },
                  "latency": {
                    "type": "string"
                  },
                  "reorder": {
                    "description": "ReorderSpec defines details of packet reorder.",
                    "type": "object",
                    "required": [
                      "gap",
                      "reorder"
                    ],
                    "properties": {
                      "correlation": {
                        "type": "string"
                      },
                      "gap": {
                        "type": "integer"
                      },
                      "reorder": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              },
              "device": {
                "description": "Device represents the network device to be affected.",
                "type": "string"
              },
              "duplicate": {
                "description": "DuplicateSpec represents the detail about loss action",
                "type": "object",
                "required": [
                  "duplicate"
                ],
                "properties": {
                  "correlation": {
                    "type": "string"
                  },
                  "duplicate": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "ipset": {
                "description": "The name of target ipset",
                "type": "string"
              },
              "loss": {
                "description": "Loss represents the detail about loss action",
                "type": "object",
                "required": [
                  "loss"
                ],
                "properties": {
                  "correlation": {
                    "type": "string"
                  },
                  "loss": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "rate": {
                "description": "Rate represents the detail about rate control action",
                "type": "object",
                "required": [
                  "rate"
                ],
                "properties": {
                  "rate": {
                    "description": "Rate is the speed knob. Allows bit, kbit, mbit, gbit, tbit, bps, kbps, mbps, gbps, tbps unit. bps means bytes per second.",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "source": {
                "description": "The name and namespace of the source network chaos",
                "type": "string"
              },
              "type": {
                "description": "The type of traffic control",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "Most recently observed status of the chaos experiment about pods",
      "type": "object",
      "properties": {
        "failedMessage": {
          "type": "string"
        },
        "observedGeneration": {
          "type": "integer",
          "format": "int64"
        }
      },
      "additionalProperties": false
    }
  }
}

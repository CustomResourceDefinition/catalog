{
  "description": "BuildRun is the Schema representing an instance of build execution",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "BuildRunSpec defines the desired state of BuildRun",
      "type": "object",
      "required": [
        "buildRef"
      ],
      "properties": {
        "buildRef": {
          "description": "BuildRef refers to the Build",
          "type": "object",
          "required": [
            "name"
          ],
          "properties": {
            "apiVersion": {
              "description": "API version of the referent",
              "type": "string"
            },
            "name": {
              "description": "Name of the referent; More info: http://kubernetes.io/docs/user-guide/identifiers#names",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "output": {
          "description": "Output refers to the location where the generated image would be pushed to. It will overwrite the output image in build spec",
          "type": "object",
          "required": [
            "image"
          ],
          "properties": {
            "credentials": {
              "description": "SecretRef is a reference to the Secret containing the credentials to push the image to the registry",
              "type": "object",
              "properties": {
                "name": {
                  "description": "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?",
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "image": {
              "description": "ImageURL is the URL where the image will be pushed to.",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "serviceAccount": {
          "description": "ServiceAccount refers to the kubernetes serviceaccount which is used for resource control. Default serviceaccount will be set if it is empty",
          "type": "object",
          "properties": {
            "generate": {
              "description": "If generates a new ServiceAccount for the build",
              "type": "boolean"
            },
            "name": {
              "description": "Name of the referent; More info: http://kubernetes.io/docs/user-guide/identifiers#names",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "timeout": {
          "description": "Timeout defines the maximum run time of this BuildRun.",
          "type": "string",
          "format": "duration"
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "BuildRunStatus defines the observed state of BuildRun",
      "type": "object",
      "properties": {
        "buildSpec": {
          "description": "BuildSpec is the Build Spec of this BuildRun.",
          "type": "object",
          "required": [
            "output",
            "source",
            "strategy"
          ],
          "properties": {
            "builder": {
              "description": "BuilderImage refers to the image containing the build tools inside which the source code would be built.",
              "type": "object",
              "required": [
                "image"
              ],
              "properties": {
                "credentials": {
                  "description": "SecretRef is a reference to the Secret containing the credentials to push the image to the registry",
                  "type": "object",
                  "properties": {
                    "name": {
                      "description": "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?",
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "image": {
                  "description": "ImageURL is the URL where the image will be pushed to.",
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "dockerfile": {
              "description": "Dockerfile is the path to the Dockerfile to be used for build strategies which bank on the Dockerfile for building an image.",
              "type": "string"
            },
            "output": {
              "description": "Output refers to the location where the generated image would be pushed to.",
              "type": "object",
              "required": [
                "image"
              ],
              "properties": {
                "credentials": {
                  "description": "SecretRef is a reference to the Secret containing the credentials to push the image to the registry",
                  "type": "object",
                  "properties": {
                    "name": {
                      "description": "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?",
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "image": {
                  "description": "ImageURL is the URL where the image will be pushed to.",
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "parameters": {
              "description": "Parameters contains name-value that could be used to loosely type parameters in the BuildStrategy.",
              "type": "array",
              "items": {
                "description": "Parameter defines the data structure that would be used for expressing arbitrary key/value pairs for the execution of a build",
                "type": "object",
                "required": [
                  "name",
                  "value"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "runtime": {
              "description": "Runtime represents the runtime-image",
              "type": "object",
              "properties": {
                "base": {
                  "description": "Base runtime base image.",
                  "type": "object",
                  "required": [
                    "image"
                  ],
                  "properties": {
                    "credentials": {
                      "description": "SecretRef is a reference to the Secret containing the credentials to push the image to the registry",
                      "type": "object",
                      "properties": {
                        "name": {
                          "description": "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?",
                          "type": "string"
                        }
                      },
                      "additionalProperties": false
                    },
                    "image": {
                      "description": "ImageURL is the URL where the image will be pushed to.",
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "entrypoint": {
                  "description": "Entrypoint runtime-image entrypoint.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "env": {
                  "description": "Env environment variables for runtime.",
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "labels": {
                  "description": "Labels map of additional labels to be applied on image.",
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "paths": {
                  "description": "Paths list of directories/files to be copied into runtime-image, using colon \":\" to split up source and destination paths.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "run": {
                  "description": "Run arbitrary commands to run before copying data into runtime-image.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "user": {
                  "description": "User definitions of user and group for runtime-image.",
                  "type": "object",
                  "required": [
                    "name"
                  ],
                  "properties": {
                    "group": {
                      "description": "Group group name or GID employed in runtime-image.",
                      "type": "string"
                    },
                    "name": {
                      "description": "Name user name to be employed in runtime-image.",
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "workDir": {
                  "description": "WorkDir runtime image working directory `WORKDIR`.",
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "source": {
              "description": "Source refers to the Git repository containing the source code to be built.",
              "type": "object",
              "required": [
                "url"
              ],
              "properties": {
                "contextDir": {
                  "description": "ContextDir is a path to subfolder in the repo. Optional.",
                  "type": "string"
                },
                "credentials": {
                  "description": "SecretRef refers to the secret that contains credentials to access the git repo. Optional.",
                  "type": "object",
                  "properties": {
                    "name": {
                      "description": "Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names TODO: Add other useful fields. apiVersion, kind, uid?",
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "flavor": {
                  "description": "Flavor of the git provider like github, gitlab, bitbucket, generic, etc. Optional.",
                  "type": "string"
                },
                "httpProxy": {
                  "description": "HTTPProxy is optional.",
                  "type": "string"
                },
                "httpsProxy": {
                  "description": "HTTPSProxy is optional.",
                  "type": "string"
                },
                "noProxy": {
                  "description": "NoProxy can be used to specify domains for which no proxying should be performed. Optional.",
                  "type": "string"
                },
                "revision": {
                  "description": "Ref is a git reference. Optional. \"master\" is used by default.",
                  "type": "string"
                },
                "url": {
                  "description": "URL of the git repo",
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "strategy": {
              "description": "StrategyRef refers to the BuildStrategy to be used to build the container image. There are namespaced scope and cluster scope BuildStrategy",
              "type": "object",
              "required": [
                "name"
              ],
              "properties": {
                "apiVersion": {
                  "description": "API version of the referent",
                  "type": "string"
                },
                "kind": {
                  "description": "BuildStrategyKind indicates the kind of the buildstrategy, namespaced or cluster scoped.",
                  "type": "string"
                },
                "name": {
                  "description": "Name of the referent; More info: http://kubernetes.io/docs/user-guide/identifiers#names",
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "timeout": {
              "description": "Timeout defines the maximum run time of a build run.",
              "type": "string",
              "format": "duration"
            }
          },
          "additionalProperties": false
        },
        "completionTime": {
          "description": "CompletionTime is the time the build completed.",
          "type": "string",
          "format": "date-time"
        },
        "conditions": {
          "description": "Conditions",
          "type": "array",
          "items": {
            "description": "Condition defines the required fields for populating Build controllers Conditions",
            "type": "object",
            "required": [
              "status",
              "type"
            ],
            "properties": {
              "lastTransitionTime": {
                "description": "LastTransitionTime last time the condition transit from one status to another.",
                "type": "string",
                "format": "date-time"
              },
              "message": {
                "description": "A human readable message indicating details about the transition.",
                "type": "string"
              },
              "reason": {
                "description": "The reason for the condition last transition.",
                "type": "string"
              },
              "status": {
                "description": "Status of the condition, one of True, False, Unknown.",
                "type": "string"
              },
              "type": {
                "description": "Type of condition",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "failedAt": {
          "description": "FailedAt points to the resource where the BuildRun failed",
          "type": "object",
          "properties": {
            "container": {
              "type": "string"
            },
            "pod": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "latestTaskRunRef": {
          "description": "PodName is the name of the pod responsible for executing this task's steps.",
          "type": "string"
        },
        "reason": {
          "description": "The Succeeded reason of the TaskRun",
          "type": "string"
        },
        "startTime": {
          "description": "StartTime is the time the build is actually started.",
          "type": "string",
          "format": "date-time"
        },
        "succeeded": {
          "description": "The Succeeded status of the TaskRun",
          "type": "string"
        }
      },
      "additionalProperties": false
    }
  }
}

{
  "description": "GCPFirewall describes a GCP firewall spec that can be used to configure GCE\nfirewalls. A GCPFirewallSpec will correspond 1:1 with a GCE firewall rule.",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "Spec is the desired configuration for GCP firewall\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status",
      "type": "object",
      "properties": {
        "action": {
          "description": "Rule action of the firewall rule. Only allow action is supported. If not\nspecified, defaults to ALLOW.",
          "type": "string",
          "default": "ALLOW",
          "enum": [
            "ALLOW"
          ]
        },
        "disabled": {
          "description": "If set to true, the GCPFirewall is not synced by the controller.",
          "type": "boolean"
        },
        "ingress": {
          "description": "A collection of sources and destinations to determine which ingress traffic is allowed.\nIf source is nil or empty, the traffic is allowed from all sources (0.0.0.0/0).\nIf destination is nil or empty, the traffic is allowed to all kubernetes cluster entities\n(nodes, pods and services) from the specified sources.\nIf both are nil, the traffic is allowed from all sources (0.0.00/0) to the cluster entities.",
          "type": "object",
          "properties": {
            "destination": {
              "description": " Destination specifies the target of the firewall rule. If this field is empty,\nthis rule allows traffic from specified sources to all kubernetes cluster entities.",
              "type": "object",
              "properties": {
                "ipBlocks": {
                  "description": "IPBlocks specify the set of destination CIDRs that the rule applies to. If this field\nis present and contains at least one item, this rule allows traffic only if\nthe traffic matches at least one item in the list. If this field is empty,\nthis rule allows all destinations.\nValid example list items are \"192.168.1.1/24\" or \"2001:db9::/64\".",
                  "type": "array",
                  "maxItems": 256,
                  "minItems": 1,
                  "items": {
                    "description": "CIDR defines a IP block.",
                    "type": "string",
                    "pattern": "^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(/(3[0-2]|2[0-9]|1[0-9]|[0-9]))?$"
                  }
                }
              },
              "additionalProperties": false
            },
            "source": {
              "description": "Source describes a peer to allow traffic from.",
              "type": "object",
              "properties": {
                "ipBlocks": {
                  "description": "IPBlocks specify the set of source CIDR ranges that the rule applies to. If this field\nis present and contains at least one item, this rule allows traffic only if\nthe traffic matches at least one item in the list. If this field is empty,\nthis rule allows all sources.\nValid example list items are \"192.168.1.1/24\" or \"2001:db9::/64\".",
                  "type": "array",
                  "maxItems": 256,
                  "minItems": 1,
                  "items": {
                    "description": "CIDR defines a IP block.",
                    "type": "string",
                    "pattern": "^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(/(3[0-2]|2[0-9]|1[0-9]|[0-9]))?$"
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "ports": {
          "description": "List of protocol/ ports which needs to be selected by this rule.\nIf this field is empty or missing, this rule matches all protocol/ ports.\nIf this field is present and contains at least one item, then this rule\nallows traffic only if the traffic matches at least one port in the list.",
          "type": "array",
          "items": {
            "description": "ProtocolPort describes the protocol and ports to allow traffic on.",
            "type": "object",
            "required": [
              "protocol"
            ],
            "properties": {
              "endPort": {
                "description": "EndPort is the last port of the port range that is selected on the firewall\nrule targets. If StartPort is not specified or greater than this value, then\nthis field is ignored.",
                "type": "integer",
                "format": "int32",
                "maximum": 65535,
                "minimum": 1
              },
              "protocol": {
                "description": "The protocol which the traffic must match.",
                "type": "string",
                "enum": [
                  "TCP",
                  "UDP",
                  "ICMP",
                  "SCTP",
                  "AH",
                  "ESP"
                ]
              },
              "startPort": {
                "description": "StartPort is the starting port of the port range that is selected on the\nfirewall rule targets for the specified protocol. If EndPort is not\nspecified, this is the only port selected.\nIf StartPort is not provided, all ports are matched.",
                "type": "integer",
                "format": "int32",
                "maximum": 65535,
                "minimum": 1
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "Status is the runtime status of this GCP firewall\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status",
      "type": "object",
      "default": {
        "conditions": [
          {
            "lastTransitionTime": "1970-01-01T00:00:00Z",
            "message": "Waiting for controller",
            "reason": "Pending",
            "status": "Unknown",
            "type": "Enforced"
          }
        ]
      },
      "properties": {
        "conditions": {
          "description": "Conditions describe the current condition of the firewall rule.",
          "type": "array",
          "default": [
            {
              "lastTransitionTime": "1970-01-01T00:00:00Z",
              "message": "Waiting for controller",
              "reason": "Pending",
              "status": "Unknown",
              "type": "Enforced"
            }
          ],
          "maxItems": 8,
          "items": {
            "description": "Condition contains details for one aspect of the current state of this API Resource.",
            "type": "object",
            "required": [
              "lastTransitionTime",
              "message",
              "reason",
              "status",
              "type"
            ],
            "properties": {
              "lastTransitionTime": {
                "description": "lastTransitionTime is the last time the condition transitioned from one status to another.\nThis should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.",
                "type": "string",
                "format": "date-time"
              },
              "message": {
                "description": "message is a human readable message indicating details about the transition.\nThis may be an empty string.",
                "type": "string",
                "maxLength": 32768
              },
              "observedGeneration": {
                "description": "observedGeneration represents the .metadata.generation that the condition was set based upon.\nFor instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date\nwith respect to the current state of the instance.",
                "type": "integer",
                "format": "int64",
                "minimum": 0
              },
              "reason": {
                "description": "reason contains a programmatic identifier indicating the reason for the condition's last transition.\nProducers of specific condition types may define expected values and meanings for this field,\nand whether the values are considered a guaranteed API.\nThe value should be a CamelCase string.\nThis field may not be empty.",
                "type": "string",
                "maxLength": 1024,
                "minLength": 1,
                "pattern": "^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$"
              },
              "status": {
                "description": "status of the condition, one of True, False, Unknown.",
                "type": "string",
                "enum": [
                  "True",
                  "False",
                  "Unknown"
                ]
              },
              "type": {
                "description": "type of condition in CamelCase or in foo.example.com/CamelCase.",
                "type": "string",
                "maxLength": 316,
                "pattern": "^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$"
              }
            },
            "additionalProperties": false
          },
          "x-kubernetes-list-map-keys": [
            "type"
          ],
          "x-kubernetes-list-type": "map"
        },
        "priority": {
          "description": "Priority of the GCP firewall rule.",
          "type": "integer",
          "format": "int32"
        },
        "resourceURL": {
          "description": "Resource link for the GCE firewall rule. In case of FW 3.0, this is the GCE\nNetwork Firewall Policy resource.",
          "type": "string"
        },
        "type": {
          "description": "Type specifies the underlying GCE firewall implementation type.\nTakes one of the values from [VPC, REGIONAL, GLOBAL]",
          "type": "string",
          "enum": [
            "VPC",
            "REGIONAL",
            "GLOBAL"
          ]
        }
      },
      "additionalProperties": false
    }
  }
}

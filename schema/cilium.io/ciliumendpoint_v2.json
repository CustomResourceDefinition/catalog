{
  "description": "CiliumEndpoint is the status of a Cilium policy rule.",
  "type": "object",
  "required": [
    "metadata"
  ],
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "status": {
      "description": "EndpointStatus is the status of a Cilium endpoint.",
      "type": "object",
      "properties": {
        "controllers": {
          "description": "Controllers is the list of failing controllers for this endpoint.",
          "type": "array",
          "items": {
            "description": "ControllerStatus is the status of a failing controller.",
            "type": "object",
            "properties": {
              "configuration": {
                "description": "Configuration is the controller configuration",
                "type": "object",
                "properties": {
                  "error-retry": {
                    "description": "Retry on error",
                    "type": "boolean"
                  },
                  "error-retry-base": {
                    "description": "Base error retry back-off time\nFormat: duration",
                    "type": "integer",
                    "format": "int64"
                  },
                  "interval": {
                    "description": "Regular synchronization interval\nFormat: duration",
                    "type": "integer",
                    "format": "int64"
                  }
                },
                "additionalProperties": false
              },
              "name": {
                "description": "Name is the name of the controller",
                "type": "string"
              },
              "status": {
                "description": "Status is the status of the controller",
                "type": "object",
                "properties": {
                  "consecutive-failure-count": {
                    "type": "integer",
                    "format": "int64"
                  },
                  "failure-count": {
                    "type": "integer",
                    "format": "int64"
                  },
                  "last-failure-msg": {
                    "type": "string"
                  },
                  "last-failure-timestamp": {
                    "type": "string"
                  },
                  "last-success-timestamp": {
                    "type": "string"
                  },
                  "success-count": {
                    "type": "integer",
                    "format": "int64"
                  }
                },
                "additionalProperties": false
              },
              "uuid": {
                "description": "UUID is the UUID of the controller",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "encryption": {
          "description": "Encryption is the encryption configuration of the node",
          "type": "object",
          "properties": {
            "key": {
              "description": "Key is the index to the key to use for encryption or 0 if encryption is\ndisabled.",
              "type": "integer"
            }
          },
          "additionalProperties": false
        },
        "external-identifiers": {
          "description": "ExternalIdentifiers is a set of identifiers to identify the endpoint\napart from the pod name. This includes container runtime IDs.",
          "type": "object",
          "properties": {
            "cni-attachment-id": {
              "description": "ID assigned to this attachment by container runtime",
              "type": "string"
            },
            "container-id": {
              "description": "ID assigned by container runtime (deprecated, may not be unique)",
              "type": "string"
            },
            "container-name": {
              "description": "Name assigned to container (deprecated, may not be unique)",
              "type": "string"
            },
            "docker-endpoint-id": {
              "description": "Docker endpoint ID",
              "type": "string"
            },
            "docker-network-id": {
              "description": "Docker network ID",
              "type": "string"
            },
            "k8s-namespace": {
              "description": "K8s namespace for this endpoint (deprecated, may not be unique)",
              "type": "string"
            },
            "k8s-pod-name": {
              "description": "K8s pod name for this endpoint (deprecated, may not be unique)",
              "type": "string"
            },
            "pod-name": {
              "description": "K8s pod for this endpoint (deprecated, may not be unique)",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "health": {
          "description": "Health is the overall endpoint \u0026 subcomponent health.",
          "type": "object",
          "properties": {
            "bpf": {
              "description": "bpf",
              "type": "string"
            },
            "connected": {
              "description": "Is this endpoint reachable",
              "type": "boolean"
            },
            "overallHealth": {
              "description": "overall health",
              "type": "string"
            },
            "policy": {
              "description": "policy",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "id": {
          "description": "ID is the cilium-agent-local ID of the endpoint.",
          "type": "integer",
          "format": "int64"
        },
        "identity": {
          "description": "Identity is the security identity associated with the endpoint",
          "type": "object",
          "properties": {
            "id": {
              "description": "ID is the numeric identity of the endpoint",
              "type": "integer",
              "format": "int64"
            },
            "labels": {
              "description": "Labels is the list of labels associated with the identity",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "additionalProperties": false
        },
        "log": {
          "description": "Log is the list of the last few warning and error log entries",
          "type": "array",
          "items": {
            "description": "EndpointStatusChange Indication of a change of status\n\nswagger:model EndpointStatusChange",
            "type": "object",
            "properties": {
              "code": {
                "description": "Code indicate type of status change\nEnum: [\"ok\",\"failed\"]",
                "type": "string"
              },
              "message": {
                "description": "Status message",
                "type": "string"
              },
              "state": {
                "description": "state",
                "type": "string"
              },
              "timestamp": {
                "description": "Timestamp when status change occurred",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "named-ports": {
          "description": "NamedPorts List of named Layer 4 port and protocol pairs which will be used in Network\nPolicy specs.\n\nswagger:model NamedPorts",
          "type": "array",
          "items": {
            "description": "Port Layer 4 port / protocol pair\n\nswagger:model Port",
            "type": "object",
            "properties": {
              "name": {
                "description": "Optional layer 4 port name",
                "type": "string"
              },
              "port": {
                "description": "Layer 4 port number",
                "type": "integer"
              },
              "protocol": {
                "description": "Layer 4 protocol\nEnum: [\"TCP\",\"UDP\",\"SCTP\",\"ICMP\",\"ICMPV6\",\"ANY\"]",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "networking": {
          "description": "Networking is the networking properties of the endpoint.",
          "type": "object",
          "required": [
            "addressing"
          ],
          "properties": {
            "addressing": {
              "description": "IP4/6 addresses assigned to this Endpoint",
              "type": "array",
              "items": {
                "description": "AddressPair is a pair of IPv4 and/or IPv6 address.",
                "type": "object",
                "properties": {
                  "ipv4": {
                    "type": "string"
                  },
                  "ipv6": {
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "node": {
              "description": "NodeIP is the IP of the node the endpoint is running on. The IP must\nbe reachable between nodes.",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "policy": {
          "description": "EndpointPolicy represents the endpoint's policy by listing all allowed\ningress and egress identities in combination with L4 port and protocol.",
          "type": "object",
          "properties": {
            "egress": {
              "description": "EndpointPolicyDirection is the list of allowed identities per direction.",
              "type": "object",
              "required": [
                "enforcing"
              ],
              "properties": {
                "adding": {
                  "description": "Deprecated",
                  "type": "array",
                  "items": {
                    "description": "IdentityTuple specifies a peer by identity, destination port and protocol.",
                    "type": "object",
                    "properties": {
                      "dest-port": {
                        "type": "integer"
                      },
                      "identity": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "identity-labels": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "protocol": {
                        "type": "integer"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "allowed": {
                  "description": "AllowedIdentityList is a list of IdentityTuples that species peers that are\nallowed.",
                  "type": "array",
                  "items": {
                    "description": "IdentityTuple specifies a peer by identity, destination port and protocol.",
                    "type": "object",
                    "properties": {
                      "dest-port": {
                        "type": "integer"
                      },
                      "identity": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "identity-labels": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "protocol": {
                        "type": "integer"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "denied": {
                  "description": "DenyIdentityList is a list of IdentityTuples that species peers that are\ndenied.",
                  "type": "array",
                  "items": {
                    "description": "IdentityTuple specifies a peer by identity, destination port and protocol.",
                    "type": "object",
                    "properties": {
                      "dest-port": {
                        "type": "integer"
                      },
                      "identity": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "identity-labels": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "protocol": {
                        "type": "integer"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "enforcing": {
                  "type": "boolean"
                },
                "removing": {
                  "description": "Deprecated",
                  "type": "array",
                  "items": {
                    "description": "IdentityTuple specifies a peer by identity, destination port and protocol.",
                    "type": "object",
                    "properties": {
                      "dest-port": {
                        "type": "integer"
                      },
                      "identity": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "identity-labels": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "protocol": {
                        "type": "integer"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "state": {
                  "description": "EndpointPolicyState defines the state of the Policy mode: \"enforcing\", \"non-enforcing\", \"disabled\"",
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "ingress": {
              "description": "EndpointPolicyDirection is the list of allowed identities per direction.",
              "type": "object",
              "required": [
                "enforcing"
              ],
              "properties": {
                "adding": {
                  "description": "Deprecated",
                  "type": "array",
                  "items": {
                    "description": "IdentityTuple specifies a peer by identity, destination port and protocol.",
                    "type": "object",
                    "properties": {
                      "dest-port": {
                        "type": "integer"
                      },
                      "identity": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "identity-labels": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "protocol": {
                        "type": "integer"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "allowed": {
                  "description": "AllowedIdentityList is a list of IdentityTuples that species peers that are\nallowed.",
                  "type": "array",
                  "items": {
                    "description": "IdentityTuple specifies a peer by identity, destination port and protocol.",
                    "type": "object",
                    "properties": {
                      "dest-port": {
                        "type": "integer"
                      },
                      "identity": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "identity-labels": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "protocol": {
                        "type": "integer"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "denied": {
                  "description": "DenyIdentityList is a list of IdentityTuples that species peers that are\ndenied.",
                  "type": "array",
                  "items": {
                    "description": "IdentityTuple specifies a peer by identity, destination port and protocol.",
                    "type": "object",
                    "properties": {
                      "dest-port": {
                        "type": "integer"
                      },
                      "identity": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "identity-labels": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "protocol": {
                        "type": "integer"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "enforcing": {
                  "type": "boolean"
                },
                "removing": {
                  "description": "Deprecated",
                  "type": "array",
                  "items": {
                    "description": "IdentityTuple specifies a peer by identity, destination port and protocol.",
                    "type": "object",
                    "properties": {
                      "dest-port": {
                        "type": "integer"
                      },
                      "identity": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "identity-labels": {
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      },
                      "protocol": {
                        "type": "integer"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "state": {
                  "description": "EndpointPolicyState defines the state of the Policy mode: \"enforcing\", \"non-enforcing\", \"disabled\"",
                  "type": "string"
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "service-account": {
          "description": "ServiceAccount is the service account associated with the endpoint",
          "type": "string"
        },
        "state": {
          "description": "State is the state of the endpoint.",
          "type": "string",
          "enum": [
            "creating",
            "waiting-for-identity",
            "not-ready",
            "waiting-to-regenerate",
            "regenerating",
            "restoring",
            "ready",
            "disconnecting",
            "disconnected",
            "invalid"
          ]
        }
      },
      "additionalProperties": false
    }
  }
}

{
  "description": "ExternalLoadBalancer is the Schema for the externalloadbalancers API",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "ExternalLoadBalancerSpec is the spec of a LoadBalancer instance.",
      "type": "object",
      "required": [
        "backend",
        "monitor",
        "ports",
        "vip"
      ],
      "properties": {
        "backend": {
          "description": "Backend is the LoadBalancer used",
          "type": "string"
        },
        "monitor": {
          "description": "Monitor is the path and port to monitor the LoadBalancer members",
          "type": "object",
          "required": [
            "monitortype",
            "path",
            "port"
          ],
          "properties": {
            "monitortype": {
              "description": "MonitorType is the monitor parent type. \u003cmonitorType\u003e must be one of \"http\", \"https\", \"icmp\", \"gateway icmp\", \"inband\", \"postgresql\", \"mysql\", \"udp\" or \"tcp\".",
              "type": "string"
            },
            "name": {
              "description": "Name is the monitor name, it is set by the controller",
              "type": "string"
            },
            "path": {
              "description": "Path is the path URL to check for the pool members",
              "type": "string"
            },
            "port": {
              "description": "Port is the port this monitor should check the pool members",
              "type": "integer"
            }
          },
          "additionalProperties": false
        },
        "nodelabels": {
          "description": "NodeLabels are the node labels used for router sharding or exposed service. Optional.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "ports": {
          "description": "Ports are the list of ports used for this Vip",
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "type": {
          "description": "Type is the node role type (master or infra) for the LoadBalancer instance",
          "type": "string"
        },
        "vip": {
          "description": "Vip is the Virtual IP configured in  this LoadBalancer instance",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "ExternalLoadBalancerStatus defines the observed state of ExternalLoadBalancer",
      "type": "object",
      "required": [
        "monitor",
        "ports",
        "vips"
      ],
      "properties": {
        "monitor": {
          "description": "Monitor defines a monitor object in the LoadBalancer.",
          "type": "object",
          "required": [
            "monitortype",
            "path",
            "port"
          ],
          "properties": {
            "monitortype": {
              "description": "MonitorType is the monitor parent type. \u003cmonitorType\u003e must be one of \"http\", \"https\", \"icmp\", \"gateway icmp\", \"inband\", \"postgresql\", \"mysql\", \"udp\" or \"tcp\".",
              "type": "string"
            },
            "name": {
              "description": "Name is the monitor name, it is set by the controller",
              "type": "string"
            },
            "path": {
              "description": "Path is the path URL to check for the pool members",
              "type": "string"
            },
            "port": {
              "description": "Port is the port this monitor should check the pool members",
              "type": "integer"
            }
          },
          "additionalProperties": false
        },
        "nodes": {
          "type": "array",
          "items": {
            "description": "Node defines a host object in the LoadBalancer.",
            "type": "object",
            "required": [
              "host"
            ],
            "properties": {
              "host": {
                "description": "Host is the host IP set dynamically by the controller",
                "type": "string"
              },
              "label": {
                "description": "Label is the node labels this node has",
                "type": "object",
                "additionalProperties": {
                  "type": "string"
                }
              },
              "name": {
                "description": "Name is the host name set dynamically by the controller",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "pools": {
          "type": "array",
          "items": {
            "description": "Pool defines a pool object in the LoadBalancer.",
            "type": "object",
            "required": [
              "monitor"
            ],
            "properties": {
              "members": {
                "description": "Members is the host members of this pool",
                "type": "array",
                "items": {
                  "description": "PoolMember defines a host object in the LoadBalancer.",
                  "type": "object",
                  "required": [
                    "node",
                    "port"
                  ],
                  "properties": {
                    "node": {
                      "description": "Node is the node part of a pool",
                      "type": "object",
                      "required": [
                        "host"
                      ],
                      "properties": {
                        "host": {
                          "description": "Host is the host IP set dynamically by the controller",
                          "type": "string"
                        },
                        "label": {
                          "description": "Label is the node labels this node has",
                          "type": "object",
                          "additionalProperties": {
                            "type": "string"
                          }
                        },
                        "name": {
                          "description": "Name is the host name set dynamically by the controller",
                          "type": "string"
                        }
                      },
                      "additionalProperties": false
                    },
                    "port": {
                      "description": "Port is the port for this pool member",
                      "type": "integer"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "monitor": {
                "description": "Monitor is the monitor name used on this pool",
                "type": "string"
              },
              "name": {
                "description": "Name is the Pool name, it is set by the controller",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "ports": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "vips": {
          "type": "array",
          "items": {
            "description": "VIP defines VIP instance in the LoadBalancer with a pool and port",
            "type": "object",
            "required": [
              "ip",
              "name",
              "pool",
              "port"
            ],
            "properties": {
              "ip": {
                "description": "IP is the IP address this VIP instance listens to",
                "type": "string"
              },
              "name": {
                "description": "Name is the VIP instance name",
                "type": "string"
              },
              "pool": {
                "description": "Pool is the associated pool with this VIP",
                "type": "string"
              },
              "port": {
                "description": "Port is the port this VIP listens to",
                "type": "integer"
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    }
  }
}

{
  "description": "Hardware is the Schema for the Hardware API.",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "HardwareSpec defines the desired state of Hardware.",
      "type": "object",
      "properties": {
        "bmcRef": {
          "description": "BMCRef contains a relation to a BMC state management type in the same\nnamespace as the Hardware. This may be used for BMC management by\norchestrators.",
          "type": "object",
          "required": [
            "kind",
            "name"
          ],
          "properties": {
            "apiGroup": {
              "description": "APIGroup is the group for the resource being referenced.\nIf APIGroup is not specified, the specified Kind must be in the core API group.\nFor any other third-party types, APIGroup is required.",
              "type": "string"
            },
            "kind": {
              "description": "Kind is the type of resource being referenced",
              "type": "string"
            },
            "name": {
              "description": "Name is the name of resource being referenced",
              "type": "string"
            }
          },
          "additionalProperties": false,
          "x-kubernetes-map-type": "atomic"
        },
        "disks": {
          "type": "array",
          "items": {
            "description": "Disk represents a disk device for Tinkerbell Hardware.",
            "type": "object",
            "properties": {
              "device": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "interfaces": {
          "type": "array",
          "items": {
            "description": "Interface represents a network interface configuration for Hardware.",
            "type": "object",
            "properties": {
              "dhcp": {
                "description": "DHCP configuration.",
                "type": "object",
                "properties": {
                  "arch": {
                    "type": "string"
                  },
                  "hostname": {
                    "type": "string"
                  },
                  "iface_name": {
                    "type": "string"
                  },
                  "ip": {
                    "description": "IP configuration.",
                    "type": "object",
                    "properties": {
                      "address": {
                        "type": "string"
                      },
                      "family": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "gateway": {
                        "type": "string"
                      },
                      "netmask": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  },
                  "lease_time": {
                    "type": "integer",
                    "format": "int64"
                  },
                  "mac": {
                    "type": "string",
                    "pattern": "([0-9a-f]{2}[:]){5}([0-9a-f]{2})"
                  },
                  "name_servers": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "time_servers": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "uefi": {
                    "type": "boolean"
                  },
                  "vlan_id": {
                    "description": "validation pattern for VLANDID is a string number between 0-4096",
                    "type": "string",
                    "pattern": "^(([0-9][0-9]{0,2}|[1-3][0-9][0-9][0-9]|40([0-8][0-9]|9[0-6]))(,[1-9][0-9]{0,2}|[1-3][0-9][0-9][0-9]|40([0-8][0-9]|9[0-6]))*)$"
                  }
                },
                "additionalProperties": false
              },
              "disableDhcp": {
                "description": "DisableDHCP disables DHCP for this interface.",
                "type": "boolean",
                "default": false
              },
              "netboot": {
                "description": "Netboot configuration.",
                "type": "object",
                "properties": {
                  "allowPXE": {
                    "type": "boolean"
                  },
                  "allowWorkflow": {
                    "type": "boolean"
                  },
                  "ipxe": {
                    "description": "IPXE configuration.",
                    "type": "object",
                    "properties": {
                      "contents": {
                        "type": "string"
                      },
                      "url": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  },
                  "osie": {
                    "description": "OSIE configuration.",
                    "type": "object",
                    "properties": {
                      "baseURL": {
                        "type": "string"
                      },
                      "initrd": {
                        "type": "string"
                      },
                      "kernel": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          }
        },
        "metadata": {
          "type": "object",
          "properties": {
            "bonding_mode": {
              "type": "integer",
              "format": "int64"
            },
            "custom": {
              "type": "object",
              "properties": {
                "preinstalled_operating_system_version": {
                  "type": "object",
                  "properties": {
                    "distro": {
                      "type": "string"
                    },
                    "image_tag": {
                      "type": "string"
                    },
                    "os_slug": {
                      "type": "string"
                    },
                    "slug": {
                      "type": "string"
                    },
                    "version": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "private_subnets": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "facility": {
              "type": "object",
              "properties": {
                "facility_code": {
                  "type": "string"
                },
                "plan_slug": {
                  "type": "string"
                },
                "plan_version_slug": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "instance": {
              "type": "object",
              "properties": {
                "allow_pxe": {
                  "type": "boolean"
                },
                "always_pxe": {
                  "type": "boolean"
                },
                "crypted_root_password": {
                  "type": "string"
                },
                "hostname": {
                  "type": "string"
                },
                "id": {
                  "type": "string"
                },
                "ips": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "address": {
                        "type": "string"
                      },
                      "family": {
                        "type": "integer",
                        "format": "int64"
                      },
                      "gateway": {
                        "type": "string"
                      },
                      "management": {
                        "type": "boolean"
                      },
                      "netmask": {
                        "type": "string"
                      },
                      "public": {
                        "type": "boolean"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "ipxe_script_url": {
                  "type": "string"
                },
                "network_ready": {
                  "type": "boolean"
                },
                "operating_system": {
                  "type": "object",
                  "properties": {
                    "distro": {
                      "type": "string"
                    },
                    "image_tag": {
                      "type": "string"
                    },
                    "os_slug": {
                      "type": "string"
                    },
                    "slug": {
                      "type": "string"
                    },
                    "version": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "rescue": {
                  "type": "boolean"
                },
                "ssh_keys": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "state": {
                  "type": "string"
                },
                "storage": {
                  "type": "object",
                  "properties": {
                    "disks": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "device": {
                            "type": "string"
                          },
                          "partitions": {
                            "type": "array",
                            "items": {
                              "type": "object",
                              "properties": {
                                "label": {
                                  "type": "string"
                                },
                                "number": {
                                  "type": "integer",
                                  "format": "int64"
                                },
                                "size": {
                                  "type": "integer",
                                  "format": "int64"
                                },
                                "start": {
                                  "type": "integer",
                                  "format": "int64"
                                },
                                "type_guid": {
                                  "type": "string"
                                }
                              },
                              "additionalProperties": false
                            }
                          },
                          "wipe_table": {
                            "type": "boolean"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "filesystems": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "mount": {
                            "type": "object",
                            "properties": {
                              "create": {
                                "type": "object",
                                "properties": {
                                  "force": {
                                    "type": "boolean"
                                  },
                                  "options": {
                                    "type": "array",
                                    "items": {
                                      "type": "string"
                                    }
                                  }
                                },
                                "additionalProperties": false
                              },
                              "device": {
                                "type": "string"
                              },
                              "files": {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "properties": {
                                    "contents": {
                                      "type": "string"
                                    },
                                    "gid": {
                                      "type": "integer",
                                      "format": "int64"
                                    },
                                    "mode": {
                                      "type": "integer",
                                      "format": "int64"
                                    },
                                    "path": {
                                      "type": "string"
                                    },
                                    "uid": {
                                      "type": "integer",
                                      "format": "int64"
                                    }
                                  },
                                  "additionalProperties": false
                                }
                              },
                              "format": {
                                "type": "string"
                              },
                              "point": {
                                "type": "string"
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "raid": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "devices": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "level": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "spare": {
                            "type": "integer",
                            "format": "int64"
                          }
                        },
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "userdata": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "manufacturer": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string"
                },
                "slug": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "state": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "resources": {
          "description": "Resources represents known resources that are available on a machine.\nResources may be used for scheduling by orchestrators.",
          "type": "object",
          "additionalProperties": {
            "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "string"
              }
            ],
            "x-kubernetes-int-or-string": true
          }
        },
        "tinkVersion": {
          "type": "integer",
          "format": "int64"
        },
        "userData": {
          "description": "UserData is the user data to configure in the hardware's\nmetadata",
          "type": "string"
        },
        "vendorData": {
          "description": "VendorData is the vendor data to configure in the hardware's\nmetadata",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "HardwareStatus defines the observed state of Hardware.",
      "type": "object",
      "properties": {
        "state": {
          "description": "HardwareState represents the hardware state.",
          "type": "string"
        }
      },
      "additionalProperties": false
    }
  }
}

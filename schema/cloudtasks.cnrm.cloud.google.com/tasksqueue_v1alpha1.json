{
  "description": "TasksQueue is the Schema for the TasksQueue API",
  "type": "object",
  "required": [
    "spec"
  ],
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "TasksQueueSpec defines the desired state of TasksQueue",
      "type": "object",
      "properties": {
        "appEngineRoutingOverride": {
          "description": "Overrides for\n [task-level\n app_engine_routing][google.cloud.tasks.v2.AppEngineHttpRequest.app_engine_routing].\n These settings apply only to\n [App Engine tasks][google.cloud.tasks.v2.AppEngineHttpRequest] in this\n queue. [Http tasks][google.cloud.tasks.v2.HttpRequest] are not affected.\n\n If set, `app_engine_routing_override` is used for all\n [App Engine tasks][google.cloud.tasks.v2.AppEngineHttpRequest] in the\n queue, no matter what the setting is for the [task-level\n app_engine_routing][google.cloud.tasks.v2.AppEngineHttpRequest.app_engine_routing].",
          "type": "object",
          "properties": {
            "host": {
              "description": "Output only. The host that the task is sent to.\n\n The host is constructed from the domain name of the app associated with\n the queue's project ID (for example \u003capp-id\u003e.appspot.com), and the\n [service][google.cloud.tasks.v2.AppEngineRouting.service],\n [version][google.cloud.tasks.v2.AppEngineRouting.version], and\n [instance][google.cloud.tasks.v2.AppEngineRouting.instance]. Tasks which\n were created using the App Engine SDK might have a custom domain name.\n\n For more information, see\n [How Requests are\n Routed](https://cloud.google.com/appengine/docs/standard/python/how-requests-are-routed).",
              "type": "string"
            },
            "instance": {
              "description": "App instance.\n\n By default, the task is sent to an instance which is available when\n the task is attempted.\n\n Requests can only be sent to a specific instance if\n [manual scaling is used in App Engine\n Standard](https://cloud.google.com/appengine/docs/python/an-overview-of-app-engine?hl=en_US#scaling_types_and_instance_classes).\n App Engine Flex does not support instances. For more information, see\n [App Engine Standard request\n routing](https://cloud.google.com/appengine/docs/standard/python/how-requests-are-routed)\n and [App Engine Flex request\n routing](https://cloud.google.com/appengine/docs/flexible/python/how-requests-are-routed).",
              "type": "string"
            },
            "service": {
              "description": "App service.\n\n By default, the task is sent to the service which is the default\n service when the task is attempted.\n\n For some queues or tasks which were created using the App Engine\n Task Queue API, [host][google.cloud.tasks.v2.AppEngineRouting.host] is not\n parsable into [service][google.cloud.tasks.v2.AppEngineRouting.service],\n [version][google.cloud.tasks.v2.AppEngineRouting.version], and\n [instance][google.cloud.tasks.v2.AppEngineRouting.instance]. For example,\n some tasks which were created using the App Engine SDK use a custom domain\n name; custom domains are not parsed by Cloud Tasks. If\n [host][google.cloud.tasks.v2.AppEngineRouting.host] is not parsable, then\n [service][google.cloud.tasks.v2.AppEngineRouting.service],\n [version][google.cloud.tasks.v2.AppEngineRouting.version], and\n [instance][google.cloud.tasks.v2.AppEngineRouting.instance] are the empty\n string.",
              "type": "string"
            },
            "version": {
              "description": "App version.\n\n By default, the task is sent to the version which is the default\n version when the task is attempted.\n\n For some queues or tasks which were created using the App Engine\n Task Queue API, [host][google.cloud.tasks.v2.AppEngineRouting.host] is not\n parsable into [service][google.cloud.tasks.v2.AppEngineRouting.service],\n [version][google.cloud.tasks.v2.AppEngineRouting.version], and\n [instance][google.cloud.tasks.v2.AppEngineRouting.instance]. For example,\n some tasks which were created using the App Engine SDK use a custom domain\n name; custom domains are not parsed by Cloud Tasks. If\n [host][google.cloud.tasks.v2.AppEngineRouting.host] is not parsable, then\n [service][google.cloud.tasks.v2.AppEngineRouting.service],\n [version][google.cloud.tasks.v2.AppEngineRouting.version], and\n [instance][google.cloud.tasks.v2.AppEngineRouting.instance] are the empty\n string.",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "location": {
          "description": "Required. The location of the queue.",
          "type": "string"
        },
        "projectRef": {
          "description": "Required. The host project of the queue.",
          "type": "object",
          "oneOf": [
            {
              "required": [
                "name"
              ],
              "not": {
                "required": [
                  "external"
                ]
              }
            },
            {
              "required": [
                "external"
              ],
              "not": {
                "anyOf": [
                  {
                    "required": [
                      "name"
                    ]
                  },
                  {
                    "required": [
                      "namespace"
                    ]
                  }
                ]
              }
            }
          ],
          "properties": {
            "external": {
              "description": "The `projectID` field of a project, when not managed by Config Connector.",
              "type": "string"
            },
            "kind": {
              "description": "The kind of the Project resource; optional but must be `Project` if provided.",
              "type": "string"
            },
            "name": {
              "description": "The `name` field of a `Project` resource.",
              "type": "string"
            },
            "namespace": {
              "description": "The `namespace` field of a `Project` resource.",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "rateLimits": {
          "description": "Rate limits for task dispatches.\n\n [rate_limits][google.cloud.tasks.v2.Queue.rate_limits] and\n [retry_config][google.cloud.tasks.v2.Queue.retry_config] are related\n because they both control task attempts. However they control task attempts\n in different ways:\n\n * [rate_limits][google.cloud.tasks.v2.Queue.rate_limits] controls the total\n rate of\n   dispatches from a queue (i.e. all traffic dispatched from the\n   queue, regardless of whether the dispatch is from a first\n   attempt or a retry).\n * [retry_config][google.cloud.tasks.v2.Queue.retry_config] controls what\n happens to\n   particular a task after its first attempt fails. That is,\n   [retry_config][google.cloud.tasks.v2.Queue.retry_config] controls task\n   retries (the second attempt, third attempt, etc).\n\n The queue's actual dispatch rate is the result of:\n\n * Number of tasks in the queue\n * User-specified throttling:\n [rate_limits][google.cloud.tasks.v2.Queue.rate_limits],\n   [retry_config][google.cloud.tasks.v2.Queue.retry_config], and the\n   [queue's state][google.cloud.tasks.v2.Queue.state].\n * System throttling due to `429` (Too Many Requests) or `503` (Service\n   Unavailable) responses from the worker, high error rates, or to smooth\n   sudden large traffic spikes.",
          "type": "object",
          "properties": {
            "maxBurstSize": {
              "description": "Output only. The max burst size.\n\n Max burst size limits how fast tasks in queue are processed when\n many tasks are in the queue and the rate is high. This field\n allows the queue to have a high rate so processing starts shortly\n after a task is enqueued, but still limits resource usage when\n many tasks are enqueued in a short period of time.\n\n The [token bucket](https://wikipedia.org/wiki/Token_Bucket)\n algorithm is used to control the rate of task dispatches. Each\n queue has a token bucket that holds tokens, up to the maximum\n specified by `max_burst_size`. Each time a task is dispatched, a\n token is removed from the bucket. Tasks will be dispatched until\n the queue's bucket runs out of tokens. The bucket will be\n continuously refilled with new tokens based on\n [max_dispatches_per_second][google.cloud.tasks.v2.RateLimits.max_dispatches_per_second].\n\n Cloud Tasks will pick the value of `max_burst_size` based on the\n value of\n [max_dispatches_per_second][google.cloud.tasks.v2.RateLimits.max_dispatches_per_second].\n\n For queues that were created or updated using\n `queue.yaml/xml`, `max_burst_size` is equal to\n [bucket_size](https://cloud.google.com/appengine/docs/standard/python/config/queueref#bucket_size).\n Since `max_burst_size` is output only, if\n [UpdateQueue][google.cloud.tasks.v2.CloudTasks.UpdateQueue] is called on a\n queue created by `queue.yaml/xml`, `max_burst_size` will be reset based on\n the value of\n [max_dispatches_per_second][google.cloud.tasks.v2.RateLimits.max_dispatches_per_second],\n regardless of whether\n [max_dispatches_per_second][google.cloud.tasks.v2.RateLimits.max_dispatches_per_second]\n is updated.",
              "type": "integer",
              "format": "int32"
            },
            "maxConcurrentDispatches": {
              "description": "The maximum number of concurrent tasks that Cloud Tasks allows\n to be dispatched for this queue. After this threshold has been\n reached, Cloud Tasks stops dispatching tasks until the number of\n concurrent requests decreases.\n\n If unspecified when the queue is created, Cloud Tasks will pick the\n default.\n\n The maximum allowed value is 5,000.\n\n This field has the same meaning as\n [max_concurrent_requests in\n queue.yaml/xml](https://cloud.google.com/appengine/docs/standard/python/config/queueref#max_concurrent_requests).",
              "type": "integer",
              "format": "int32"
            },
            "maxDispatchesPerSecond": {
              "description": "The maximum rate at which tasks are dispatched from this queue.\n\n If unspecified when the queue is created, Cloud Tasks will pick the\n default.\n\n * The maximum allowed value is 500.\n\n This field has the same meaning as\n [rate in\n queue.yaml/xml](https://cloud.google.com/appengine/docs/standard/python/config/queueref#rate).",
              "type": "number"
            }
          },
          "additionalProperties": false
        },
        "resourceID": {
          "description": "The TasksQueue name. If not given, the metadata.name will be used.",
          "type": "string"
        },
        "retryConfig": {
          "description": "Settings that determine the retry behavior.\n\n * For tasks created using Cloud Tasks: the queue-level retry settings\n   apply to all tasks in the queue that were created using Cloud Tasks.\n   Retry settings cannot be set on individual tasks.\n * For tasks created using the App Engine SDK: the queue-level retry\n   settings apply to all tasks in the queue which do not have retry settings\n   explicitly set on the task and were created by the App Engine SDK. See\n   [App Engine\n   documentation](https://cloud.google.com/appengine/docs/standard/python/taskqueue/push/retrying-tasks).",
          "type": "object",
          "properties": {
            "maxAttempts": {
              "description": "Number of attempts per task.\n\n Cloud Tasks will attempt the task `max_attempts` times (that is, if the\n first attempt fails, then there will be `max_attempts - 1` retries). Must\n be \u003e= -1.\n\n If unspecified when the queue is created, Cloud Tasks will pick the\n default.\n\n -1 indicates unlimited attempts.\n\n This field has the same meaning as\n [task_retry_limit in\n queue.yaml/xml](https://cloud.google.com/appengine/docs/standard/python/config/queueref#retry_parameters).",
              "type": "integer",
              "format": "int32"
            },
            "maxBackoff": {
              "description": "A task will be [scheduled][google.cloud.tasks.v2.Task.schedule_time] for\n retry between [min_backoff][google.cloud.tasks.v2.RetryConfig.min_backoff]\n and [max_backoff][google.cloud.tasks.v2.RetryConfig.max_backoff] duration\n after it fails, if the queue's\n [RetryConfig][google.cloud.tasks.v2.RetryConfig] specifies that the task\n should be retried.\n\n If unspecified when the queue is created, Cloud Tasks will pick the\n default.\n\n `max_backoff` will be truncated to the nearest second.\n\n This field has the same meaning as\n [max_backoff_seconds in\n queue.yaml/xml](https://cloud.google.com/appengine/docs/standard/python/config/queueref#retry_parameters).",
              "type": "string"
            },
            "maxDoublings": {
              "description": "The time between retries will double `max_doublings` times.\n\n A task's retry interval starts at\n [min_backoff][google.cloud.tasks.v2.RetryConfig.min_backoff], then doubles\n `max_doublings` times, then increases linearly, and finally\n retries at intervals of\n [max_backoff][google.cloud.tasks.v2.RetryConfig.max_backoff] up to\n [max_attempts][google.cloud.tasks.v2.RetryConfig.max_attempts] times.\n\n For example, if\n [min_backoff][google.cloud.tasks.v2.RetryConfig.min_backoff] is 10s,\n [max_backoff][google.cloud.tasks.v2.RetryConfig.max_backoff] is 300s, and\n `max_doublings` is 3, then the a task will first be retried in\n 10s. The retry interval will double three times, and then\n increase linearly by 2^3 * 10s.  Finally, the task will retry at\n intervals of [max_backoff][google.cloud.tasks.v2.RetryConfig.max_backoff]\n until the task has been attempted\n [max_attempts][google.cloud.tasks.v2.RetryConfig.max_attempts] times. Thus,\n the requests will retry at 10s, 20s, 40s, 80s, 160s, 240s, 300s, 300s, ....\n\n If unspecified when the queue is created, Cloud Tasks will pick the\n default.\n\n This field has the same meaning as\n [max_doublings in\n queue.yaml/xml](https://cloud.google.com/appengine/docs/standard/python/config/queueref#retry_parameters).",
              "type": "integer",
              "format": "int32"
            },
            "maxRetryDuration": {
              "description": "If positive, `max_retry_duration` specifies the time limit for\n retrying a failed task, measured from when the task was first\n attempted. Once `max_retry_duration` time has passed *and* the\n task has been attempted\n [max_attempts][google.cloud.tasks.v2.RetryConfig.max_attempts] times, no\n further attempts will be made and the task will be deleted.\n\n If zero, then the task age is unlimited.\n\n If unspecified when the queue is created, Cloud Tasks will pick the\n default.\n\n `max_retry_duration` will be truncated to the nearest second.\n\n This field has the same meaning as\n [task_age_limit in\n queue.yaml/xml](https://cloud.google.com/appengine/docs/standard/python/config/queueref#retry_parameters).",
              "type": "string"
            },
            "minBackoff": {
              "description": "A task will be [scheduled][google.cloud.tasks.v2.Task.schedule_time] for\n retry between [min_backoff][google.cloud.tasks.v2.RetryConfig.min_backoff]\n and [max_backoff][google.cloud.tasks.v2.RetryConfig.max_backoff] duration\n after it fails, if the queue's\n [RetryConfig][google.cloud.tasks.v2.RetryConfig] specifies that the task\n should be retried.\n\n If unspecified when the queue is created, Cloud Tasks will pick the\n default.\n\n `min_backoff` will be truncated to the nearest second.\n\n This field has the same meaning as\n [min_backoff_seconds in\n queue.yaml/xml](https://cloud.google.com/appengine/docs/standard/python/config/queueref#retry_parameters).",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "stackdriverLoggingConfig": {
          "description": "Configuration options for writing logs to [Stackdriver Logging](https://cloud.google.com/logging/docs/). If this field is unset, then no logs are written.",
          "type": "object",
          "properties": {
            "samplingRatio": {
              "description": "Specifies the fraction of operations to write to [Stackdriver Logging](https://cloud.google.com/logging/docs/). This field may contain any value between 0.0 and 1.0, inclusive. 0.0 is the default and means that no operations are logged.",
              "type": "number"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "TasksQueueStatus defines the config connector machine state of TasksQueue",
      "type": "object",
      "properties": {
        "conditions": {
          "description": "Conditions represent the latest available observations of the object's current state.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "lastTransitionTime": {
                "description": "Last time the condition transitioned from one status to another.",
                "type": "string"
              },
              "message": {
                "description": "Human-readable message indicating details about last transition.",
                "type": "string"
              },
              "reason": {
                "description": "Unique, one-word, CamelCase reason for the condition's last transition.",
                "type": "string"
              },
              "status": {
                "description": "Status is the status of the condition. Can be True, False, Unknown.",
                "type": "string"
              },
              "type": {
                "description": "Type is the type of the condition.",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "externalRef": {
          "description": "A unique specifier for the TasksQueue resource in GCP.",
          "type": "string"
        },
        "observedGeneration": {
          "description": "ObservedGeneration is the generation of the resource that was most recently observed by the Config Connector controller. If this is equal to metadata.generation, then that means that the current reported status reflects the most recent desired state of the resource.",
          "type": "integer",
          "format": "int64"
        },
        "observedState": {
          "description": "ObservedState is the state of the resource as most recently observed in GCP.",
          "type": "object",
          "properties": {
            "purgeTime": {
              "description": "Output only. The last time this queue was purged.\n\n All tasks that were [created][google.cloud.tasks.v2.Task.create_time]\n before this time were purged.\n\n A queue can be purged using\n [PurgeQueue][google.cloud.tasks.v2.CloudTasks.PurgeQueue], the [App Engine\n Task Queue SDK, or the Cloud\n Console](https://cloud.google.com/appengine/docs/standard/python/taskqueue/push/deleting-tasks-and-queues#purging_all_tasks_from_a_queue).\n\n Purge time will be truncated to the nearest microsecond. Purge\n time will be unset if the queue has never been purged.",
              "type": "string"
            },
            "state": {
              "description": "Output only. The state of the queue.\n\n `state` can only be changed by calling\n [PauseQueue][google.cloud.tasks.v2.CloudTasks.PauseQueue],\n [ResumeQueue][google.cloud.tasks.v2.CloudTasks.ResumeQueue], or uploading\n [queue.yaml/xml](https://cloud.google.com/appengine/docs/python/config/queueref).\n [UpdateQueue][google.cloud.tasks.v2.CloudTasks.UpdateQueue] cannot be used\n to change `state`.",
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  }
}

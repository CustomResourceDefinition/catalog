{
  "description": "ALBTargetControlConfig is the Schema for the albtargetcontrolconfigs API",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "ALBTargetControlConfigSpec defines the desired state of ALBTargetControlConfig",
      "type": "object",
      "required": [
        "controlAddress",
        "dataAddress",
        "destinationAddress",
        "image"
      ],
      "properties": {
        "controlAddress": {
          "description": "ControlAddress specifies the socket (IP:port) where the load balancer exchanges management traffic with agents.\nThe port in the socket is the target control port you configure for the target group.",
          "type": "string",
          "pattern": "^.+:[0-9]+$"
        },
        "dataAddress": {
          "description": "DataAddress specifies the socket (IP:port) where the agent receives application traffic from the load balancer.\nThe port in this socket is the application traffic port you configure for your target group.",
          "type": "string",
          "pattern": "^.+:[0-9]+$"
        },
        "destinationAddress": {
          "description": "DestinationAddress specifies the socket (IP:port) where the agent proxies application traffic.\nYour application should be listening on this port.",
          "type": "string",
          "pattern": "^.+:[0-9]+$"
        },
        "image": {
          "description": "Image specifies the container image for the ALB target control agent sidecar.\nThe agent is available as a Docker image at: public.ecr.aws/aws-elb/target-optimizer/target-control-agent:latest",
          "type": "string"
        },
        "maxConcurrency": {
          "description": "MaxConcurrency specifies the maximum number of concurrent requests that the target receives from the load balancer.",
          "type": "integer",
          "format": "int32",
          "default": 1,
          "maximum": 1000,
          "minimum": 0
        },
        "protocolVersion": {
          "description": "ProtocolVersion specifies the protocol through which the load balancer communicates with the agent.\nPossible values are HTTP1, HTTP2, GRPC.",
          "type": "string",
          "enum": [
            "HTTP1",
            "HTTP2",
            "GRPC"
          ]
        },
        "resources": {
          "description": "Resources specifies the resource requirements for the ALB target control agent sidecar",
          "type": "object",
          "properties": {
            "claims": {
              "description": "Claims lists the names of resources, defined in spec.resourceClaims,\nthat are used by this container.\n\nThis is an alpha field and requires enabling the\nDynamicResourceAllocation feature gate.\n\nThis field is immutable. It can only be set for containers.",
              "type": "array",
              "items": {
                "description": "ResourceClaim references one entry in PodSpec.ResourceClaims.",
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "description": "Name must match the name of one entry in pod.spec.resourceClaims of\nthe Pod where this field is used. It makes that resource available\ninside a container.",
                    "type": "string"
                  },
                  "request": {
                    "description": "Request is the name chosen for a request in the referenced claim.\nIf empty, everything from the claim is made available, otherwise\nonly the result of this request.",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              },
              "x-kubernetes-list-map-keys": [
                "name"
              ],
              "x-kubernetes-list-type": "map"
            },
            "limits": {
              "description": "Limits describes the maximum amount of compute resources allowed.\nMore info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/",
              "type": "object",
              "additionalProperties": {
                "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "x-kubernetes-int-or-string": true
              }
            },
            "requests": {
              "description": "Requests describes the minimum amount of compute resources required.\nIf Requests is omitted for a container, it defaults to Limits if that is explicitly specified,\notherwise to an implementation-defined value. Requests cannot exceed Limits.\nMore info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/",
              "type": "object",
              "additionalProperties": {
                "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "x-kubernetes-int-or-string": true
              }
            }
          },
          "additionalProperties": false
        },
        "rustLog": {
          "description": "RustLog specifies the log level of the agent process. The agent software is written in Rust.\nPossible values are debug, info, and error.",
          "type": "string",
          "enum": [
            "debug",
            "info",
            "error"
          ]
        },
        "tlsCertPath": {
          "description": "TLSCertPath specifies the location of the TLS certificate that the agent provides to the load balancer during TLS handshake.\nBy default, the agent generates a self-signed certificate in-memory.",
          "type": "string"
        },
        "tlsKeyPath": {
          "description": "TLSKeyPath specifies the location of the private key corresponding to the TLS certificate that the agent provides to the load balancer during TLS handshake.\nBy default, the agent generates a private key in memory.",
          "type": "string"
        },
        "tlsSecurityPolicy": {
          "description": "TLSSecurityPolicy specifies the ELB security policy that you configure for the target group.",
          "type": "string"
        }
      },
      "additionalProperties": false
    }
  }
}

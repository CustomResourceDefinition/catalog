{
  "description": "GrafanaServiceAccount is the Schema for the grafanaserviceaccounts API",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "GrafanaServiceAccountSpec defines the desired state of a GrafanaServiceAccount.",
      "type": "object",
      "required": [
        "instanceName",
        "name",
        "role"
      ],
      "properties": {
        "instanceName": {
          "description": "Name of the Grafana instance to create the service account for",
          "type": "string",
          "minLength": 1,
          "x-kubernetes-validations": [
            {
              "rule": "self == oldSelf",
              "message": "spec.instanceName is immutable"
            }
          ]
        },
        "isDisabled": {
          "description": "Whether the service account is disabled",
          "type": "boolean",
          "default": false
        },
        "name": {
          "description": "Name of the service account in Grafana",
          "type": "string",
          "minLength": 1,
          "x-kubernetes-validations": [
            {
              "rule": "self == oldSelf",
              "message": "spec.name is immutable"
            }
          ]
        },
        "resyncPeriod": {
          "description": "How often the resource is synced, defaults to 10m0s if not set",
          "type": "string",
          "default": "10m0s",
          "pattern": "^([0-9]+(\\.[0-9]+)?(ns|us|Âµs|ms|s|m|h))+$",
          "x-kubernetes-validations": [
            {
              "rule": "duration(self) \u003e duration('0s')",
              "message": "spec.resyncPeriod must be greater than 0"
            }
          ]
        },
        "role": {
          "description": "Role of the service account (Viewer, Editor, Admin)",
          "type": "string",
          "enum": [
            "Viewer",
            "Editor",
            "Admin"
          ]
        },
        "suspend": {
          "description": "Suspend pauses reconciliation of the service account",
          "type": "boolean",
          "default": false
        },
        "tokens": {
          "description": "Tokens to create for the service account",
          "type": "array",
          "items": {
            "description": "GrafanaServiceAccountTokenSpec defines a token for a service account",
            "type": "object",
            "required": [
              "name"
            ],
            "properties": {
              "expires": {
                "description": "Expiration date of the token. If not set, the token never expires",
                "type": "string",
                "format": "date-time"
              },
              "name": {
                "description": "Name of the token",
                "type": "string",
                "minLength": 1
              },
              "secretName": {
                "description": "Name of the secret to store the token. If not set, a name will be generated",
                "type": "string",
                "minLength": 1
              }
            },
            "additionalProperties": false
          },
          "x-kubernetes-list-map-keys": [
            "name"
          ],
          "x-kubernetes-list-type": "map"
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "GrafanaServiceAccountStatus defines the observed state of a GrafanaServiceAccount",
      "type": "object",
      "properties": {
        "account": {
          "description": "Info contains the Grafana service account information",
          "type": "object",
          "required": [
            "id",
            "isDisabled",
            "login",
            "name",
            "role"
          ],
          "properties": {
            "id": {
              "description": "ID of the service account in Grafana",
              "type": "integer",
              "format": "int64"
            },
            "isDisabled": {
              "description": "IsDisabled indicates if the service account is disabled",
              "type": "boolean"
            },
            "login": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "role": {
              "description": "Role is the Grafana role for the service account (Viewer, Editor, Admin)",
              "type": "string"
            },
            "tokens": {
              "description": "Information about tokens",
              "type": "array",
              "items": {
                "description": "GrafanaServiceAccountTokenStatus describes a token created in Grafana.",
                "type": "object",
                "required": [
                  "id",
                  "name"
                ],
                "properties": {
                  "expires": {
                    "description": "Expiration time of the token\nN.B. There's possible discrepancy with the expiration time in spec\nIt happens because Grafana API accepts TTL in seconds then calculates the expiration time against the current time",
                    "type": "string",
                    "format": "date-time"
                  },
                  "id": {
                    "description": "ID of the token in Grafana",
                    "type": "integer",
                    "format": "int64"
                  },
                  "name": {
                    "type": "string"
                  },
                  "secret": {
                    "description": "Name of the secret containing the token",
                    "type": "object",
                    "properties": {
                      "name": {
                        "type": "string"
                      },
                      "namespace": {
                        "type": "string"
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              }
            }
          },
          "additionalProperties": false
        },
        "conditions": {
          "description": "Results when synchonizing resource with Grafana instances",
          "type": "array",
          "items": {
            "description": "Condition contains details for one aspect of the current state of this API Resource.",
            "type": "object",
            "required": [
              "lastTransitionTime",
              "message",
              "reason",
              "status",
              "type"
            ],
            "properties": {
              "lastTransitionTime": {
                "description": "lastTransitionTime is the last time the condition transitioned from one status to another.\nThis should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.",
                "type": "string",
                "format": "date-time"
              },
              "message": {
                "description": "message is a human readable message indicating details about the transition.\nThis may be an empty string.",
                "type": "string",
                "maxLength": 32768
              },
              "observedGeneration": {
                "description": "observedGeneration represents the .metadata.generation that the condition was set based upon.\nFor instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date\nwith respect to the current state of the instance.",
                "type": "integer",
                "format": "int64",
                "minimum": 0
              },
              "reason": {
                "description": "reason contains a programmatic identifier indicating the reason for the condition's last transition.\nProducers of specific condition types may define expected values and meanings for this field,\nand whether the values are considered a guaranteed API.\nThe value should be a CamelCase string.\nThis field may not be empty.",
                "type": "string",
                "maxLength": 1024,
                "minLength": 1,
                "pattern": "^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$"
              },
              "status": {
                "description": "status of the condition, one of True, False, Unknown.",
                "type": "string",
                "enum": [
                  "True",
                  "False",
                  "Unknown"
                ]
              },
              "type": {
                "description": "type of condition in CamelCase or in foo.example.com/CamelCase.",
                "type": "string",
                "maxLength": 316,
                "pattern": "^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$"
              }
            },
            "additionalProperties": false
          }
        },
        "lastResync": {
          "description": "Last time the resource was synchronized with Grafana instances",
          "type": "string",
          "format": "date-time"
        }
      },
      "additionalProperties": false
    }
  }
}

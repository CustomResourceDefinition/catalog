{
  "description": "Resourcepools allows you to define a set of resources as known from ResoureQuotas. The Resourcepools are defined at cluster-scope an should\nbe administrated by cluster-administrators. However they create an interface, where cluster-administrators can define\nfrom which namespaces resources from a Resourcepool can be claimed. The claiming is done via a namespaced CRD called ResourcePoolClaim. Then\nit's up the group of users within these namespaces, to manage the resources they consume per namespace. Each Resourcepool provisions a ResourceQuotainto all the selected namespaces. Then essentially the ResourcePoolClaims, when they can be assigned to the ResourcePool stack resources on top of that\nResourceQuota based on the namspace, where the ResourcePoolClaim was made from.",
  "type": "object",
  "required": [
    "spec"
  ],
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "ResourcePoolSpec.",
      "type": "object",
      "required": [
        "quota"
      ],
      "properties": {
        "config": {
          "description": "Additional Configuration",
          "type": "object",
          "default": {},
          "properties": {
            "defaultsZero": {
              "description": "With this option all resources which can be allocated are set to 0 for the resourcequota defaults.",
              "type": "boolean",
              "default": false
            },
            "deleteBoundResources": {
              "description": "When a resourcepool is deleted, the resourceclaims bound to it are disassociated from the resourcepool but not deleted.\nBy Enabling this option, the resourceclaims will be deleted when the resourcepool is deleted, if they are in bound state.",
              "type": "boolean",
              "default": false
            },
            "orderedQueue": {
              "description": "Claims are queued whenever they are allocated to a pool. A pool tries to allocate claims in order based on their\ncreation date. But no matter their creation time, if a claim is requesting too much resources it's put into the queue\nbut if a lower priority claim still has enough space in the available resources, it will be able to claim them. Eventough\nit's priority was lower\nEnabling this option respects to Order. Meaning the Creationtimestamp matters and if a resource is put into the queue, no\nother claim can claim the same resources with lower priority.",
              "type": "boolean",
              "default": false
            }
          },
          "additionalProperties": false
        },
        "defaults": {
          "description": "The Defaults given for each namespace, the default is not counted towards the total allocation\nWhen you use claims it's recommended to provision Defaults as the prevent the scheduling of any resources",
          "type": "object",
          "additionalProperties": {
            "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "string"
              }
            ],
            "x-kubernetes-int-or-string": true
          }
        },
        "quota": {
          "description": "Define the resourcequota served by this resourcepool.",
          "type": "object",
          "properties": {
            "hard": {
              "description": "hard is the set of desired hard limits for each named resource.\nMore info: https://kubernetes.io/docs/concepts/policy/resource-quotas/",
              "type": "object",
              "additionalProperties": {
                "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "x-kubernetes-int-or-string": true
              }
            },
            "scopeSelector": {
              "description": "scopeSelector is also a collection of filters like scopes that must match each object tracked by a quota\nbut expressed using ScopeSelectorOperator in combination with possible values.\nFor a resource to match, both scopes AND scopeSelector (if specified in spec), must be matched.",
              "type": "object",
              "properties": {
                "matchExpressions": {
                  "description": "A list of scope selector requirements by scope of the resources.",
                  "type": "array",
                  "items": {
                    "description": "A scoped-resource selector requirement is a selector that contains values, a scope name, and an operator\nthat relates the scope name and values.",
                    "type": "object",
                    "required": [
                      "operator",
                      "scopeName"
                    ],
                    "properties": {
                      "operator": {
                        "description": "Represents a scope's relationship to a set of values.\nValid operators are In, NotIn, Exists, DoesNotExist.",
                        "type": "string"
                      },
                      "scopeName": {
                        "description": "The name of the scope that the selector applies to.",
                        "type": "string"
                      },
                      "values": {
                        "description": "An array of string values. If the operator is In or NotIn,\nthe values array must be non-empty. If the operator is Exists or DoesNotExist,\nthe values array must be empty.\nThis array is replaced during a strategic merge patch.",
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "x-kubernetes-list-type": "atomic"
                      }
                    },
                    "additionalProperties": false
                  },
                  "x-kubernetes-list-type": "atomic"
                }
              },
              "additionalProperties": false,
              "x-kubernetes-map-type": "atomic"
            },
            "scopes": {
              "description": "A collection of filters that must match each object tracked by a quota.\nIf not specified, the quota matches all objects.",
              "type": "array",
              "items": {
                "description": "A ResourceQuotaScope defines a filter that must match each object tracked by a quota",
                "type": "string"
              },
              "x-kubernetes-list-type": "atomic"
            }
          },
          "additionalProperties": false
        },
        "selectors": {
          "description": "Selector to match the namespaces that should be managed by the GlobalResourceQuota",
          "type": "array",
          "items": {
            "description": "Selector for resources and their labels or selecting origin namespaces",
            "type": "object",
            "properties": {
              "matchExpressions": {
                "description": "matchExpressions is a list of label selector requirements. The requirements are ANDed.",
                "type": "array",
                "items": {
                  "description": "A label selector requirement is a selector that contains values, a key, and an operator that\nrelates the key and values.",
                  "type": "object",
                  "required": [
                    "key",
                    "operator"
                  ],
                  "properties": {
                    "key": {
                      "description": "key is the label key that the selector applies to.",
                      "type": "string"
                    },
                    "operator": {
                      "description": "operator represents a key's relationship to a set of values.\nValid operators are In, NotIn, Exists and DoesNotExist.",
                      "type": "string"
                    },
                    "values": {
                      "description": "values is an array of string values. If the operator is In or NotIn,\nthe values array must be non-empty. If the operator is Exists or DoesNotExist,\nthe values array must be empty. This array is replaced during a strategic\nmerge patch.",
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "x-kubernetes-list-type": "atomic"
                    }
                  },
                  "additionalProperties": false
                },
                "x-kubernetes-list-type": "atomic"
              },
              "matchLabels": {
                "description": "matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels\nmap is equivalent to an element of matchExpressions, whose key field is \"key\", the\noperator is \"In\", and the values array contains only \"value\". The requirements are ANDed.",
                "type": "object",
                "additionalProperties": {
                  "type": "string"
                }
              }
            },
            "additionalProperties": false,
            "x-kubernetes-map-type": "atomic"
          }
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "GlobalResourceQuotaStatus defines the observed state of GlobalResourceQuota.",
      "type": "object",
      "properties": {
        "allocation": {
          "description": "Tracks the Usage from Claimed against what has been granted from the pool",
          "type": "object",
          "properties": {
            "available": {
              "description": "Used to track the usage of the resource in the pool (diff hard - claimed). May be used for further automation",
              "type": "object",
              "additionalProperties": {
                "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "x-kubernetes-int-or-string": true
              }
            },
            "hard": {
              "description": "Hard is the set of enforced hard limits for each named resource.\nMore info: https://kubernetes.io/docs/concepts/policy/resource-quotas/",
              "type": "object",
              "additionalProperties": {
                "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "x-kubernetes-int-or-string": true
              }
            },
            "used": {
              "description": "Used is the current observed total usage of the resource in the namespace.",
              "type": "object",
              "additionalProperties": {
                "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "x-kubernetes-int-or-string": true
              }
            }
          },
          "additionalProperties": false
        },
        "claimCount": {
          "description": "Amount of claims",
          "type": "integer",
          "default": 0
        },
        "claims": {
          "description": "Tracks the quotas for the Resource.",
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {
              "description": "ResourceQuotaClaimStatus defines the observed state of ResourceQuotaClaim.",
              "type": "object",
              "properties": {
                "claims": {
                  "description": "Claimed resources",
                  "type": "object",
                  "additionalProperties": {
                    "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                    "anyOf": [
                      {
                        "type": "integer"
                      },
                      {
                        "type": "string"
                      }
                    ],
                    "x-kubernetes-int-or-string": true
                  }
                },
                "name": {
                  "description": "Name",
                  "type": "string",
                  "maxLength": 253,
                  "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
                },
                "namespace": {
                  "description": "Namespace",
                  "type": "string",
                  "maxLength": 253,
                  "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
                },
                "uid": {
                  "description": "UID of the tracked Tenant to pin point tracking",
                  "type": "string"
                }
              }
            }
          }
        },
        "exhaustions": {
          "description": "Exhaustions from claims associated with the pool",
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "available": {
                "description": "Available Resources to be claimed",
                "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "x-kubernetes-int-or-string": true
              },
              "requesting": {
                "description": "Requesting Resources",
                "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "string"
                  }
                ],
                "x-kubernetes-int-or-string": true
              }
            }
          }
        },
        "namespaceCount": {
          "description": "How many namespaces are considered",
          "type": "integer",
          "default": 0
        },
        "namespaces": {
          "description": "Namespaces which are considered for claims",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": false
    }
  }
}

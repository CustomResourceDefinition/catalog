{
  "description": "AtlasFederatedAuth is the Schema for the Atlasfederatedauth API",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "type": "object",
      "properties": {
        "connectionSecretRef": {
          "description": "Connection secret with API credentials for configuring the federation.\nThese credentials must have OrganizationOwner permissions.",
          "type": "object",
          "required": [
            "name"
          ],
          "properties": {
            "name": {
              "description": "Name is the name of the Kubernetes Resource",
              "type": "string"
            },
            "namespace": {
              "description": "Namespace is the namespace of the Kubernetes Resource",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "dataAccessIdentityProviders": {
          "description": "The collection of unique ids representing the identity providers that can be used for data access in this organization.\nCurrently connected data access identity providers missing from the this field will be disconnected.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "domainAllowList": {
          "description": "Approved domains that restrict users who can join the organization based on their email address.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "domainRestrictionEnabled": {
          "description": "Prevent users in the federation from accessing organizations outside of the federation, and creating new organizations.\nThis option applies to the entire federation.\nSee more information at https://www.mongodb.com/docs/atlas/security/federation-advanced-options/#restrict-user-membership-to-the-federation",
          "type": "boolean",
          "default": false
        },
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "postAuthRoleGrants": {
          "description": "Atlas roles that are granted to a user in this organization after authenticating.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "roleMappings": {
          "description": "Map IDP groups to Atlas roles.",
          "type": "array",
          "items": {
            "description": "RoleMapping maps an external group from an identity provider to roles within Atlas.",
            "type": "object",
            "properties": {
              "externalGroupName": {
                "description": "ExternalGroupName is the name of the IDP group to which this mapping applies.",
                "type": "string",
                "maxLength": 200,
                "minLength": 1
              },
              "roleAssignments": {
                "description": "RoleAssignments define the roles within projects that should be given to members of the group.",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "projectName": {
                      "description": "The Atlas project in the same org in which the role should be given.",
                      "type": "string"
                    },
                    "role": {
                      "description": "The role in Atlas that should be given to group members.",
                      "type": "string",
                      "enum": [
                        "ORG_MEMBER",
                        "ORG_READ_ONLY",
                        "ORG_BILLING_ADMIN",
                        "ORG_GROUP_CREATOR",
                        "ORG_OWNER",
                        "ORG_BILLING_READ_ONLY",
                        "ORG_TEAM_MEMBERS_ADMIN",
                        "GROUP_AUTOMATION_ADMIN",
                        "GROUP_BACKUP_ADMIN",
                        "GROUP_MONITORING_ADMIN",
                        "GROUP_OWNER",
                        "GROUP_READ_ONLY",
                        "GROUP_USER_ADMIN",
                        "GROUP_BILLING_ADMIN",
                        "GROUP_DATA_ACCESS_ADMIN",
                        "GROUP_DATA_ACCESS_READ_ONLY",
                        "GROUP_DATA_ACCESS_READ_WRITE",
                        "GROUP_CHARTS_ADMIN",
                        "GROUP_CLUSTER_MANAGER",
                        "GROUP_SEARCH_INDEX_EDITOR"
                      ]
                    }
                  },
                  "additionalProperties": false
                }
              }
            },
            "additionalProperties": false
          }
        },
        "ssoDebugEnabled": {
          "type": "boolean",
          "default": false
        }
      },
      "additionalProperties": false
    },
    "status": {
      "type": "object",
      "required": [
        "conditions"
      ],
      "properties": {
        "conditions": {
          "description": "Conditions is the list of statuses showing the current state of the Atlas Custom Resource",
          "type": "array",
          "items": {
            "description": "Condition describes the state of an Atlas Custom Resource at a certain point.",
            "type": "object",
            "required": [
              "status",
              "type"
            ],
            "properties": {
              "lastTransitionTime": {
                "description": "Last time the condition transitioned from one status to another.",
                "type": "string",
                "format": "date-time"
              },
              "message": {
                "description": "A human readable message indicating details about the transition.",
                "type": "string"
              },
              "reason": {
                "description": "The reason for the condition's last transition.",
                "type": "string"
              },
              "status": {
                "description": "Status of the condition, one of True, False, Unknown.",
                "type": "string"
              },
              "type": {
                "description": "Type of Atlas Custom Resource condition.",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "observedGeneration": {
          "description": "ObservedGeneration indicates the generation of the resource specification that the Atlas Operator is aware of.\nThe Atlas Operator updates this field to the 'metadata.generation' as soon as it starts reconciliation of the resource.",
          "type": "integer",
          "format": "int64"
        }
      },
      "additionalProperties": false
    }
  }
}

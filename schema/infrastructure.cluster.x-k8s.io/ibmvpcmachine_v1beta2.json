{
  "description": "IBMVPCMachine is the Schema for the ibmvpcmachines API.",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "IBMVPCMachineSpec defines the desired state of IBMVPCMachine.",
      "type": "object",
      "required": [
        "image",
        "zone"
      ],
      "properties": {
        "bootVolume": {
          "description": "BootVolume contains machines's boot volume configurations like size, iops etc..",
          "type": "object",
          "properties": {
            "deleteVolumeOnInstanceDelete": {
              "description": "DeleteVolumeOnInstanceDelete If set to true, when deleting the instance the volume will also be deleted.\nDefault is set as true",
              "type": "boolean",
              "default": true
            },
            "encryptionKeyCRN": {
              "description": "EncryptionKey is the root key to use to wrap the data encryption key for the volume and this points to the CRN\nand possible values are as follows.\nThe CRN of the [Key Protect Root\nKey](https://cloud.ibm.com/docs/key-protect?topic=key-protect-getting-started-tutorial) or [Hyper Protect Crypto\nService Root Key](https://cloud.ibm.com/docs/hs-crypto?topic=hs-crypto-get-started) for this resource.\nIf unspecified, the `encryption` type for the volume will be `provider_managed`.",
              "type": "string"
            },
            "iops": {
              "description": "Iops is the maximum I/O operations per second (IOPS) to use for the volume. Applicable only to volumes using a profile\nfamily of `custom`.",
              "type": "integer",
              "format": "int64"
            },
            "name": {
              "description": "Name is the unique user-defined name for this volume.\nDefault will be autogenerated",
              "type": "string"
            },
            "profile": {
              "description": "Profile is the volume profile for the bootdisk, refer https://cloud.ibm.com/docs/vpc?topic=vpc-block-storage-profiles\nfor more information.\nDefault to general-purpose",
              "type": "string",
              "default": "general-purpose",
              "enum": [
                "general-purpose",
                "5iops-tier",
                "10iops-tier",
                "custom"
              ]
            },
            "sizeGiB": {
              "description": "SizeGiB is the size of the virtual server's boot disk in GiB.\nDefault to the size of the image's `minimum_provisioned_size`.",
              "type": "integer",
              "format": "int64"
            }
          },
          "additionalProperties": false
        },
        "catalogOffering": {
          "description": "CatalogOffering is the Catalog Offering OS image which would be installed on the instance.\nAn OfferingCRN or VersionCRN is required, the PlanCRN is optional.",
          "type": "object",
          "properties": {
            "offeringCRN": {
              "description": "OfferingCRN defines the IBM Cloud Catalog Offering CRN. Using the OfferingCRN expects that the latest version of the Offering will be used.\nIf a specific version should be used instead, rely on VersionCRN.",
              "type": "string"
            },
            "planCRN": {
              "description": "PlanCRN defines the IBM Cloud Catalog Offering Plan CRN to use for the Offering.",
              "type": "string"
            },
            "versionCRN": {
              "description": "VersionCRN defines the IBM Cloud Catalog Offering Version CRN. A specific version of the Catalog Offering will be used, as defined by this CRN.",
              "type": "string"
            }
          },
          "additionalProperties": false,
          "x-kubernetes-validations": [
            {
              "rule": "(has(self.offeringCRN) \u0026\u0026 !has(self.versionCRN)) || (!has(self.offeringCRN) \u0026\u0026 has(self.versionCRN))",
              "message": "either offeringCRN or version CRN must be provided, not both"
            }
          ]
        },
        "image": {
          "description": "Image is the OS image which would be install on the instance.\nID will take higher precedence over Name if both specified.",
          "type": "object",
          "properties": {
            "id": {
              "description": "ID of resource",
              "type": "string",
              "minLength": 1
            },
            "name": {
              "description": "Name of resource",
              "type": "string",
              "minLength": 1
            }
          },
          "additionalProperties": false
        },
        "loadBalancerPoolMembers": {
          "description": "LoadBalancerPoolMembers is the set of IBM Cloud VPC Load Balancer Backend Pools the machine should be added to as a member.",
          "type": "array",
          "items": {
            "description": "VPCLoadBalancerBackendPoolMember represents a VPC Load Balancer Backend Pool Member.",
            "type": "object",
            "required": [
              "loadBalancer",
              "pool",
              "port"
            ],
            "properties": {
              "loadBalancer": {
                "description": "LoadBalancer defines the Load Balancer the Pool Member is for.",
                "type": "object",
                "properties": {
                  "id": {
                    "description": "id of the resource.",
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "description": "name of the resource.",
                    "type": "string",
                    "minLength": 1
                  }
                },
                "additionalProperties": false,
                "x-kubernetes-validations": [
                  {
                    "rule": "has(self.id) || has(self.name)",
                    "message": "an id or name must be provided"
                  }
                ]
              },
              "pool": {
                "description": "Pool defines the Load Balancer Pool the Pool Member should be in.",
                "type": "object",
                "properties": {
                  "id": {
                    "description": "id of the resource.",
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "description": "name of the resource.",
                    "type": "string",
                    "minLength": 1
                  }
                },
                "additionalProperties": false,
                "x-kubernetes-validations": [
                  {
                    "rule": "has(self.id) || has(self.name)",
                    "message": "an id or name must be provided"
                  }
                ]
              },
              "port": {
                "description": "Port defines the Port the Load Balancer Pool Member listens for traffic.",
                "type": "integer",
                "format": "int64"
              },
              "weight": {
                "description": "Weight of the service member. Only applicable if the pool algorithm is \"weighted_round_robin\".",
                "type": "integer",
                "format": "int64"
              }
            },
            "additionalProperties": false
          }
        },
        "name": {
          "description": "Name of the instance.",
          "type": "string"
        },
        "placementTarget": {
          "description": "PlacementTarget is the placement restrictions to use for the virtual server instance. No restrictions are used when this field is not defined.",
          "type": "object",
          "properties": {
            "dedicatedHost": {
              "description": "DedicatedHost defines the Dedicated Host to place a VPC Machine (Instance) on.",
              "type": "object",
              "properties": {
                "id": {
                  "description": "id of the resource.",
                  "type": "string",
                  "minLength": 1
                },
                "name": {
                  "description": "name of the resource.",
                  "type": "string",
                  "minLength": 1
                }
              },
              "additionalProperties": false,
              "x-kubernetes-validations": [
                {
                  "rule": "has(self.id) || has(self.name)",
                  "message": "an id or name must be provided"
                }
              ]
            },
            "dedicatedHostGroup": {
              "description": "DedicatedHostGroup defines the Dedicated Host Group to use when placing a VPC Machine (Instance).",
              "type": "object",
              "properties": {
                "id": {
                  "description": "id of the resource.",
                  "type": "string",
                  "minLength": 1
                },
                "name": {
                  "description": "name of the resource.",
                  "type": "string",
                  "minLength": 1
                }
              },
              "additionalProperties": false,
              "x-kubernetes-validations": [
                {
                  "rule": "has(self.id) || has(self.name)",
                  "message": "an id or name must be provided"
                }
              ]
            },
            "placementGroup": {
              "description": "PlacementGroup defines the Placement Group to use when placing a VPC Machine (Instance).",
              "type": "object",
              "properties": {
                "id": {
                  "description": "id of the resource.",
                  "type": "string",
                  "minLength": 1
                },
                "name": {
                  "description": "name of the resource.",
                  "type": "string",
                  "minLength": 1
                }
              },
              "additionalProperties": false,
              "x-kubernetes-validations": [
                {
                  "rule": "has(self.id) || has(self.name)",
                  "message": "an id or name must be provided"
                }
              ]
            }
          },
          "additionalProperties": false,
          "x-kubernetes-validations": [
            {
              "rule": "(has(self.dedicatedHost) \u0026\u0026 !has(self.dedicatedHostGroup) \u0026\u0026 !has(self.placementGroup)) || (!has(self.dedicatedHost) \u0026\u0026 has(self.dedicatedHostGroup) \u0026\u0026 !has(self.placementGroup)) || (!has(self.dedicatedHost) \u0026\u0026 !has(self.dedicatedHostGroup) \u0026\u0026 has(self.placementGroup))",
              "message": "only one of dedicatedHost, dedicatedHostGroup, or placementGroup must be defined for machine placement"
            }
          ]
        },
        "primaryNetworkInterface": {
          "description": "PrimaryNetworkInterface is required to specify subnet.",
          "type": "object",
          "properties": {
            "securityGroups": {
              "description": "SecurityGroups defines a set of IBM Cloud VPC Security Groups to attach to the network interface.",
              "type": "array",
              "items": {
                "description": "VPCResource represents a VPC resource.",
                "type": "object",
                "properties": {
                  "id": {
                    "description": "id of the resource.",
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "description": "name of the resource.",
                    "type": "string",
                    "minLength": 1
                  }
                },
                "additionalProperties": false,
                "x-kubernetes-validations": [
                  {
                    "rule": "has(self.id) || has(self.name)",
                    "message": "an id or name must be provided"
                  }
                ]
              }
            },
            "subnet": {
              "description": "Subnet ID of the network interface.",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "profile": {
          "description": "Profile indicates the flavor of instance. Example: bx2-8x32\tmeans 8 vCPUs\t32 GB RAM\t16 Gbps",
          "type": "string"
        },
        "providerID": {
          "description": "ProviderID is the unique identifier as specified by the cloud provider.",
          "type": "string"
        },
        "sshKeys": {
          "description": "SSHKeys is the SSH pub keys that will be used to access VM.\nID will take higher precedence over Name if both specified.",
          "type": "array",
          "items": {
            "description": "IBMVPCResourceReference is a reference to a specific VPC resource by ID or Name\nOnly one of ID or Name may be specified. Specifying more than one will result in\na validation error.",
            "type": "object",
            "properties": {
              "id": {
                "description": "ID of resource",
                "type": "string",
                "minLength": 1
              },
              "name": {
                "description": "Name of resource",
                "type": "string",
                "minLength": 1
              }
            },
            "additionalProperties": false
          }
        },
        "zone": {
          "description": "Zone is the place where the instance should be created. Example: us-south-3",
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "IBMVPCMachineStatus defines the observed state of IBMVPCMachine.",
      "type": "object",
      "properties": {
        "addresses": {
          "description": "Addresses contains the IBM Cloud instance associated addresses.",
          "type": "array",
          "items": {
            "description": "NodeAddress contains information for the node's address.",
            "type": "object",
            "required": [
              "address",
              "type"
            ],
            "properties": {
              "address": {
                "description": "The node address.",
                "type": "string"
              },
              "type": {
                "description": "Node address type, one of Hostname, ExternalIP or InternalIP.",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "conditions": {
          "description": "Conditions deefines current service state of the IBMVPCMachine.",
          "type": "array",
          "items": {
            "description": "Condition defines an observation of a Cluster API resource operational state.",
            "type": "object",
            "required": [
              "lastTransitionTime",
              "status",
              "type"
            ],
            "properties": {
              "lastTransitionTime": {
                "description": "lastTransitionTime is the last time the condition transitioned from one status to another.\nThis should be when the underlying condition changed. If that is not known, then using the time when\nthe API field changed is acceptable.",
                "type": "string",
                "format": "date-time"
              },
              "message": {
                "description": "message is a human readable message indicating details about the transition.\nThis field may be empty.",
                "type": "string",
                "maxLength": 10240,
                "minLength": 1
              },
              "reason": {
                "description": "reason is the reason for the condition's last transition in CamelCase.\nThe specific API may choose whether or not this field is considered a guaranteed API.\nThis field may be empty.",
                "type": "string",
                "maxLength": 256,
                "minLength": 1
              },
              "severity": {
                "description": "severity provides an explicit classification of Reason code, so the users or machines can immediately\nunderstand the current situation and act accordingly.\nThe Severity field MUST be set only when Status=False.",
                "type": "string",
                "maxLength": 32
              },
              "status": {
                "description": "status of the condition, one of True, False, Unknown.",
                "type": "string"
              },
              "type": {
                "description": "type of condition in CamelCase or in foo.example.com/CamelCase.\nMany .condition.type values are consistent across resources like Available, but because arbitrary conditions\ncan be useful (see .node.status.conditions), the ability to deconflict is important.",
                "type": "string",
                "maxLength": 256,
                "minLength": 1
              }
            },
            "additionalProperties": false
          }
        },
        "failureMessage": {
          "description": "FailureMessage will be set in the event that there is a terminal problem\nreconciling the Machine and will contain a more verbose string suitable\nfor logging and human consumption.",
          "type": "string"
        },
        "failureReason": {
          "description": "FailureReason will be set in the event that there is a terminal problem\nreconciling the Machine and will contain a succinct value suitable\nfor machine interpretation.",
          "type": "string"
        },
        "instanceID": {
          "description": "InstanceID defines the IBM Cloud VPC Instance UUID.",
          "type": "string"
        },
        "instanceState": {
          "description": "InstanceStatus is the status of the IBM Cloud instance for this machine.",
          "type": "string"
        },
        "loadBalancerPoolMembers": {
          "description": "LoadBalancerPoolMembers is the status of IBM Cloud VPC Load Balancer Backend Pools the machine is a member.",
          "type": "array",
          "items": {
            "description": "VPCLoadBalancerBackendPoolMember represents a VPC Load Balancer Backend Pool Member.",
            "type": "object",
            "required": [
              "loadBalancer",
              "pool",
              "port"
            ],
            "properties": {
              "loadBalancer": {
                "description": "LoadBalancer defines the Load Balancer the Pool Member is for.",
                "type": "object",
                "properties": {
                  "id": {
                    "description": "id of the resource.",
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "description": "name of the resource.",
                    "type": "string",
                    "minLength": 1
                  }
                },
                "additionalProperties": false,
                "x-kubernetes-validations": [
                  {
                    "rule": "has(self.id) || has(self.name)",
                    "message": "an id or name must be provided"
                  }
                ]
              },
              "pool": {
                "description": "Pool defines the Load Balancer Pool the Pool Member should be in.",
                "type": "object",
                "properties": {
                  "id": {
                    "description": "id of the resource.",
                    "type": "string",
                    "minLength": 1
                  },
                  "name": {
                    "description": "name of the resource.",
                    "type": "string",
                    "minLength": 1
                  }
                },
                "additionalProperties": false,
                "x-kubernetes-validations": [
                  {
                    "rule": "has(self.id) || has(self.name)",
                    "message": "an id or name must be provided"
                  }
                ]
              },
              "port": {
                "description": "Port defines the Port the Load Balancer Pool Member listens for traffic.",
                "type": "integer",
                "format": "int64"
              },
              "weight": {
                "description": "Weight of the service member. Only applicable if the pool algorithm is \"weighted_round_robin\".",
                "type": "integer",
                "format": "int64"
              }
            },
            "additionalProperties": false
          }
        },
        "ready": {
          "description": "Ready is true when the provider resource is ready.",
          "type": "boolean"
        },
        "v1beta2": {
          "description": "V1beta2 groups all the fields that will be added or modified in IBMVPCMachine's status with the V1Beta2 version.",
          "type": "object",
          "properties": {
            "conditions": {
              "description": "Conditions represents the observations of a IBMVPCMachine's current state.",
              "type": "array",
              "maxItems": 32,
              "items": {
                "description": "Condition contains details for one aspect of the current state of this API Resource.",
                "type": "object",
                "required": [
                  "lastTransitionTime",
                  "message",
                  "reason",
                  "status",
                  "type"
                ],
                "properties": {
                  "lastTransitionTime": {
                    "description": "lastTransitionTime is the last time the condition transitioned from one status to another.\nThis should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.",
                    "type": "string",
                    "format": "date-time"
                  },
                  "message": {
                    "description": "message is a human readable message indicating details about the transition.\nThis may be an empty string.",
                    "type": "string",
                    "maxLength": 32768
                  },
                  "observedGeneration": {
                    "description": "observedGeneration represents the .metadata.generation that the condition was set based upon.\nFor instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date\nwith respect to the current state of the instance.",
                    "type": "integer",
                    "format": "int64",
                    "minimum": 0
                  },
                  "reason": {
                    "description": "reason contains a programmatic identifier indicating the reason for the condition's last transition.\nProducers of specific condition types may define expected values and meanings for this field,\nand whether the values are considered a guaranteed API.\nThe value should be a CamelCase string.\nThis field may not be empty.",
                    "type": "string",
                    "maxLength": 1024,
                    "minLength": 1,
                    "pattern": "^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$"
                  },
                  "status": {
                    "description": "status of the condition, one of True, False, Unknown.",
                    "type": "string",
                    "enum": [
                      "True",
                      "False",
                      "Unknown"
                    ]
                  },
                  "type": {
                    "description": "type of condition in CamelCase or in foo.example.com/CamelCase.",
                    "type": "string",
                    "maxLength": 316,
                    "pattern": "^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$"
                  }
                },
                "additionalProperties": false
              },
              "x-kubernetes-list-map-keys": [
                "type"
              ],
              "x-kubernetes-list-type": "map"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  }
}

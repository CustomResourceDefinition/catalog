{
  "description": "AzureCluster is the Schema for the azureclusters API",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "AzureClusterSpec defines the desired state of AzureCluster",
      "type": "object",
      "required": [
        "location",
        "resourceGroup"
      ],
      "properties": {
        "additionalTags": {
          "description": "AdditionalTags is an optional set of tags to add to Azure resources managed by the Azure provider, in addition to the ones added by default.",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "location": {
          "type": "string"
        },
        "networkSpec": {
          "description": "NetworkSpec encapsulates all things related to Azure network.",
          "type": "object",
          "properties": {
            "subnets": {
              "description": "Subnets is the configuration for the control-plane subnet and the node subnet.",
              "type": "array",
              "items": {
                "description": "SubnetSpec configures an Azure subnet.",
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "cidrBlock": {
                    "description": "CidrBlock is the CIDR block to be used when the provider creates a managed Vnet.",
                    "type": "string"
                  },
                  "id": {
                    "description": "ID defines a unique identifier to reference this resource.",
                    "type": "string"
                  },
                  "internalLBIPAddress": {
                    "description": "InternalLBIPAddress is the IP address that will be used as the internal LB private IP. For the control plane subnet only.",
                    "type": "string"
                  },
                  "name": {
                    "description": "Name defines a name for the subnet resource.",
                    "type": "string"
                  },
                  "role": {
                    "description": "Role defines the subnet role (eg. Node, ControlPlane)",
                    "type": "string"
                  },
                  "securityGroup": {
                    "description": "SecurityGroup defines the NSG (network security group) that should be attached to this subnet.",
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string"
                      },
                      "ingressRule": {
                        "description": "IngressRules is a slice of Azure ingress rules for security groups.",
                        "type": "array",
                        "items": {
                          "description": "IngressRule defines an Azure ingress rule for security groups.",
                          "type": "object",
                          "required": [
                            "description",
                            "protocol"
                          ],
                          "properties": {
                            "description": {
                              "type": "string"
                            },
                            "destination": {
                              "description": "Destination - The destination address prefix. CIDR or destination IP range. Asterix '*' can also be used to match all source IPs. Default tags such as 'VirtualNetwork', 'AzureLoadBalancer' and 'Internet' can also be used.",
                              "type": "string"
                            },
                            "destinationPorts": {
                              "description": "DestinationPorts - The destination port or range. Integer or range between 0 and 65535. Asterix '*' can also be used to match all ports.",
                              "type": "string"
                            },
                            "protocol": {
                              "description": "SecurityGroupProtocol defines the protocol type for a security group rule.",
                              "type": "string"
                            },
                            "source": {
                              "description": "Source - The CIDR or source IP range. Asterix '*' can also be used to match all source IPs. Default tags such as 'VirtualNetwork', 'AzureLoadBalancer' and 'Internet' can also be used. If this is an ingress rule, specifies where network traffic originates from.",
                              "type": "string"
                            },
                            "sourcePorts": {
                              "description": "SourcePorts - The source port or range. Integer or range between 0 and 65535. Asterix '*' can also be used to match all ports.",
                              "type": "string"
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "name": {
                        "type": "string"
                      },
                      "tags": {
                        "description": "Tags defines a map of tags.",
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              }
            },
            "vnet": {
              "description": "Vnet is the configuration for the Azure virtual network.",
              "type": "object",
              "required": [
                "name"
              ],
              "properties": {
                "cidrBlock": {
                  "description": "CidrBlock is the CIDR block to be used when the provider creates a managed virtual network.",
                  "type": "string"
                },
                "id": {
                  "description": "ID is the identifier of the virtual network this provider should use to create resources.",
                  "type": "string"
                },
                "name": {
                  "description": "Name defines a name for the virtual network resource.",
                  "type": "string"
                },
                "resourceGroup": {
                  "description": "ResourceGroup is the name of the resource group of the existing virtual network or the resource group where a managed virtual network should be created.",
                  "type": "string"
                },
                "tags": {
                  "description": "Tags is a collection of tags describing the resource.",
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "resourceGroup": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "AzureClusterStatus defines the observed state of AzureCluster",
      "type": "object",
      "properties": {
        "apiEndpoints": {
          "description": "APIEndpoints represents the endpoints to communicate with the control plane.",
          "type": "array",
          "items": {
            "description": "APIEndpoint represents a reachable Kubernetes API endpoint.",
            "type": "object",
            "required": [
              "host",
              "port"
            ],
            "properties": {
              "host": {
                "description": "The hostname on which the API server is serving.",
                "type": "string"
              },
              "port": {
                "description": "The port on which the API server is serving.",
                "type": "integer"
              }
            },
            "additionalProperties": false
          }
        },
        "bastion": {
          "description": "VM describes an Azure virtual machine.",
          "type": "object",
          "properties": {
            "addresses": {
              "description": "Addresses contains the Azure instance associated addresses.",
              "type": "array",
              "items": {
                "description": "NodeAddress contains information for the node's address.",
                "type": "object",
                "required": [
                  "address",
                  "type"
                ],
                "properties": {
                  "address": {
                    "description": "The node address.",
                    "type": "string"
                  },
                  "type": {
                    "description": "Node address type, one of Hostname, ExternalIP or InternalIP.",
                    "type": "string"
                  }
                },
                "additionalProperties": false
              }
            },
            "availabilityZone": {
              "type": "string"
            },
            "id": {
              "type": "string"
            },
            "identity": {
              "description": "VMIdentity defines the identity of the virtual machine, if configured.",
              "type": "string"
            },
            "image": {
              "description": "Storage profile",
              "type": "object",
              "properties": {
                "gallery": {
                  "type": "string"
                },
                "id": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "offer": {
                  "type": "string"
                },
                "publisher": {
                  "type": "string"
                },
                "resourceGroup": {
                  "type": "string"
                },
                "sku": {
                  "type": "string"
                },
                "subscriptionID": {
                  "type": "string"
                },
                "version": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "name": {
              "type": "string"
            },
            "osDisk": {
              "type": "object",
              "required": [
                "diskSizeGB",
                "managedDisk",
                "osType"
              ],
              "properties": {
                "diskSizeGB": {
                  "type": "integer",
                  "format": "int32"
                },
                "managedDisk": {
                  "type": "object",
                  "required": [
                    "storageAccountType"
                  ],
                  "properties": {
                    "storageAccountType": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "osType": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "startupScript": {
              "type": "string"
            },
            "tags": {
              "description": "Tags defines a map of tags.",
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "vmSize": {
              "description": "Hardware profile",
              "type": "string"
            },
            "vmState": {
              "description": "State - The provisioning state, which only appears in the response.",
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "network": {
          "description": "Network encapsulates Azure networking resources.",
          "type": "object",
          "properties": {
            "apiServerIp": {
              "description": "APIServerIP is the Kubernetes API server public IP address.",
              "type": "object",
              "properties": {
                "dnsName": {
                  "type": "string"
                },
                "id": {
                  "type": "string"
                },
                "ipAddress": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            },
            "apiServerLb": {
              "description": "APIServerLB is the Kubernetes API server load balancer.",
              "type": "object",
              "properties": {
                "backendPool": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "name": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false
                },
                "frontendIpConfig": {
                  "type": "object"
                },
                "id": {
                  "type": "string"
                },
                "name": {
                  "type": "string"
                },
                "sku": {
                  "description": "LoadBalancerSKU enumerates the values for load balancer sku name.",
                  "type": "string"
                },
                "tags": {
                  "description": "Tags defines a map of tags.",
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false
            },
            "securityGroups": {
              "description": "SecurityGroups is a map from the role/kind of the security group to its unique name, if any.",
              "type": "object",
              "additionalProperties": {
                "description": "SecurityGroup defines an Azure security group.",
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string"
                  },
                  "ingressRule": {
                    "description": "IngressRules is a slice of Azure ingress rules for security groups.",
                    "type": "array",
                    "items": {
                      "description": "IngressRule defines an Azure ingress rule for security groups.",
                      "type": "object",
                      "required": [
                        "description",
                        "protocol"
                      ],
                      "properties": {
                        "description": {
                          "type": "string"
                        },
                        "destination": {
                          "description": "Destination - The destination address prefix. CIDR or destination IP range. Asterix '*' can also be used to match all source IPs. Default tags such as 'VirtualNetwork', 'AzureLoadBalancer' and 'Internet' can also be used.",
                          "type": "string"
                        },
                        "destinationPorts": {
                          "description": "DestinationPorts - The destination port or range. Integer or range between 0 and 65535. Asterix '*' can also be used to match all ports.",
                          "type": "string"
                        },
                        "protocol": {
                          "description": "SecurityGroupProtocol defines the protocol type for a security group rule.",
                          "type": "string"
                        },
                        "source": {
                          "description": "Source - The CIDR or source IP range. Asterix '*' can also be used to match all source IPs. Default tags such as 'VirtualNetwork', 'AzureLoadBalancer' and 'Internet' can also be used. If this is an ingress rule, specifies where network traffic originates from.",
                          "type": "string"
                        },
                        "sourcePorts": {
                          "description": "SourcePorts - The source port or range. Integer or range between 0 and 65535. Asterix '*' can also be used to match all ports.",
                          "type": "string"
                        }
                      }
                    }
                  },
                  "name": {
                    "type": "string"
                  },
                  "tags": {
                    "description": "Tags defines a map of tags.",
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "additionalProperties": false
        },
        "ready": {
          "description": "Ready is true when the provider resource is ready.",
          "type": "boolean"
        }
      },
      "additionalProperties": false
    }
  }
}

{
  "description": "PodGroup is a collection of Pod; used for batch workload.",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "Specification of the desired behavior of the pod group.\nMore info: https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status",
      "type": "object",
      "properties": {
        "minMember": {
          "description": "MinMember defines the minimal number of members/tasks to run the pod group;\nif there's not enough resources to start all tasks, the scheduler\nwill not start anyone.",
          "type": "integer",
          "format": "int32",
          "minimum": 0
        },
        "minResources": {
          "description": "MinResources defines the minimal resource of members/tasks to run the pod group;\nif there's not enough resources to start all tasks, the scheduler\nwill not start anyone.",
          "type": "object",
          "additionalProperties": {
            "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "string"
              }
            ],
            "x-kubernetes-int-or-string": true
          }
        },
        "minTaskMember": {
          "description": "MinTaskMember defines the minimal number of pods to run for each task in the pod group;\nif there's not enough resources to start each task, the scheduler\nwill not start anyone.\nSubGroupPolicy covers all capabilities of minTaskMember, while providing richer network topology and Gang scheduling management capabilities.\nRecommend using SubGroupPolicy to uniformly manage Gang scheduling for each Task group.",
          "type": "object",
          "additionalProperties": {
            "type": "integer",
            "format": "int32"
          }
        },
        "networkTopology": {
          "description": "NetworkTopology defines the NetworkTopology config, this field works in conjunction with network topology feature and hyperNode CRD.",
          "type": "object",
          "properties": {
            "highestTierAllowed": {
              "description": "HighestTierAllowed specifies the highest tier that a job allowed to cross when scheduling.",
              "type": "integer",
              "minimum": 0
            },
            "highestTierName": {
              "description": "HighestTierName specifies the highest tier name that a job allowed to cross when scheduling.\nHighestTierName and HighestTierAllowed cannot be set simultaneously.",
              "type": "string",
              "maxLength": 253
            },
            "mode": {
              "description": "Mode specifies the mode of the network topology constrain.",
              "type": "string",
              "default": "hard",
              "enum": [
                "hard",
                "soft"
              ]
            }
          },
          "additionalProperties": false
        },
        "priorityClassName": {
          "description": "If specified, indicates the PodGroup's priority. \"system-node-critical\" and\n\"system-cluster-critical\" are two special keywords which indicate the\nhighest priorities with the former being the highest priority. Any other\nname must be defined by creating a PriorityClass object with that name.\nIf not specified, the PodGroup priority will be default or zero if there is no\ndefault.",
          "type": "string",
          "maxLength": 253
        },
        "queue": {
          "description": "Queue defines the queue to allocate resource for PodGroup; if queue does not exist,\nthe PodGroup will not be scheduled. Defaults to `default` Queue with the lowest weight.",
          "type": "string",
          "default": "default",
          "maxLength": 253,
          "pattern": "^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"
        },
        "subGroupPolicy": {
          "description": "Compared with minTaskMember, it offers more comprehensive topology scheduling and Gang scheduling management capabilities.\nConcurrent use with minTaskMember is not recommended, and SubGroupPolicy is the long-term evolution direction.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "labelSelector": {
                "description": "LabelSelector is used to find matching pods.\nPods that match this label selector are counted to determine the number of pods\nin their corresponding topology domain.",
                "type": "object",
                "properties": {
                  "matchExpressions": {
                    "description": "matchExpressions is a list of label selector requirements. The requirements are ANDed.",
                    "type": "array",
                    "items": {
                      "description": "A label selector requirement is a selector that contains values, a key, and an operator that\nrelates the key and values.",
                      "type": "object",
                      "required": [
                        "key",
                        "operator"
                      ],
                      "properties": {
                        "key": {
                          "description": "key is the label key that the selector applies to.",
                          "type": "string"
                        },
                        "operator": {
                          "description": "operator represents a key's relationship to a set of values.\nValid operators are In, NotIn, Exists and DoesNotExist.",
                          "type": "string"
                        },
                        "values": {
                          "description": "values is an array of string values. If the operator is In or NotIn,\nthe values array must be non-empty. If the operator is Exists or DoesNotExist,\nthe values array must be empty. This array is replaced during a strategic\nmerge patch.",
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "x-kubernetes-list-type": "atomic"
                        }
                      },
                      "additionalProperties": false
                    },
                    "x-kubernetes-list-type": "atomic"
                  },
                  "matchLabels": {
                    "description": "matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels\nmap is equivalent to an element of matchExpressions, whose key field is \"key\", the\noperator is \"In\", and the values array contains only \"value\". The requirements are ANDed.",
                    "type": "object",
                    "additionalProperties": {
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "x-kubernetes-map-type": "atomic"
              },
              "matchLabelKeys": {
                "description": "MatchLabelKeys: A label-based grouping configuration field for Pods, defining filtering rules for grouping label keys\nCore function: Refine grouping of Pods that meet LabelSelector criteria by label attributes, with the following rules and constraints:\n1. Scope: Only applies to Pods matching the predefined LabelSelector\n2. Grouping rule: Specify one or more label keys; Pods containing the target label keys with exactly the same corresponding label values are grouped together\n3. Policy constraint: Pods in the same group follow a unified NetworkTopology policy to achieve group-level network behavior governance",
                "type": "array",
                "items": {
                  "type": "string"
                },
                "x-kubernetes-list-type": "atomic"
              },
              "minSubGroups": {
                "description": "MinSubGroups: Minimum number of subgroups required to trigger scheduling. Scheduling is initiated only if cluster resources meet the requirements of at least this number of subgroups.\nSubgroup-level Gang Scheduling",
                "type": "integer",
                "format": "int32",
                "default": 0,
                "minimum": 0
              },
              "name": {
                "description": "Name specifies the name of SubGroupPolicy",
                "type": "string",
                "maxLength": 253
              },
              "networkTopology": {
                "description": "NetworkTopology defines the NetworkTopology config, this field works in conjunction with network topology feature and hyperNode CRD.",
                "type": "object",
                "properties": {
                  "highestTierAllowed": {
                    "description": "HighestTierAllowed specifies the highest tier that a job allowed to cross when scheduling.",
                    "type": "integer",
                    "minimum": 0
                  },
                  "highestTierName": {
                    "description": "HighestTierName specifies the highest tier name that a job allowed to cross when scheduling.\nHighestTierName and HighestTierAllowed cannot be set simultaneously.",
                    "type": "string",
                    "maxLength": 253
                  },
                  "mode": {
                    "description": "Mode specifies the mode of the network topology constrain.",
                    "type": "string",
                    "default": "hard",
                    "enum": [
                      "hard",
                      "soft"
                    ]
                  }
                },
                "additionalProperties": false
              },
              "subGroupSize": {
                "description": "SubGroupSize defines the number of pods in each sub-affinity group.\nOnly when a subGroup of pods, with a size of \"subGroupSize\", can satisfy the network topology constraint then will the subGroup be scheduled.",
                "type": "integer",
                "format": "int32",
                "default": 1,
                "minimum": 1
              }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "Status represents the current information about a pod group.\nThis data may not be up to date.",
      "type": "object",
      "properties": {
        "conditions": {
          "description": "The conditions of PodGroup.",
          "type": "array",
          "items": {
            "description": "PodGroupCondition contains details for the current state of this pod group.",
            "type": "object",
            "properties": {
              "lastTransitionTime": {
                "description": "Last time the phase transitioned from another to current phase.",
                "type": "string",
                "format": "date-time"
              },
              "message": {
                "description": "Human-readable message indicating details about last transition.",
                "type": "string"
              },
              "reason": {
                "description": "Unique, one-word, CamelCase reason for the phase's last transition.",
                "type": "string"
              },
              "status": {
                "description": "Status is the status of the condition.",
                "type": "string"
              },
              "transitionID": {
                "description": "The ID of condition transition.",
                "type": "string"
              },
              "type": {
                "description": "Type is the type of the condition",
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "failed": {
          "description": "The number of pods which reached phase Failed.",
          "type": "integer",
          "format": "int32",
          "minimum": 0
        },
        "phase": {
          "description": "Current phase of PodGroup.",
          "type": "string",
          "enum": [
            "Pending",
            "Running",
            "Unknown",
            "Inqueue",
            "Completed"
          ]
        },
        "running": {
          "description": "The number of actively running pods.",
          "type": "integer",
          "format": "int32",
          "minimum": 0
        },
        "succeeded": {
          "description": "The number of pods which reached phase Succeeded.",
          "type": "integer",
          "format": "int32",
          "minimum": 0
        }
      },
      "additionalProperties": false
    }
  }
}

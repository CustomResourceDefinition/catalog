{
  "description": "TestSuite is the Schema for the testsuites API",
  "type": "object",
  "properties": {
    "apiVersion": {
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources",
      "type": "string"
    },
    "kind": {
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds",
      "type": "string"
    },
    "metadata": {
      "type": "object"
    },
    "spec": {
      "description": "TestSuiteSpec defines the desired state of TestSuite",
      "type": "object",
      "properties": {
        "after": {
          "description": "After steps is list of tests which will be sequentially orchestrated",
          "type": "array",
          "items": {
            "description": "TestSuiteStepSpec will of particular type will have config for possible step types",
            "type": "object",
            "properties": {
              "delay": {
                "description": "TestSuiteStepDelay contains step delay parameters",
                "type": "object",
                "properties": {
                  "duration": {
                    "description": "Duration in ms",
                    "type": "integer",
                    "format": "int32"
                  }
                },
                "additionalProperties": false
              },
              "execute": {
                "description": "TestSuiteStepExecute defines step to be executed",
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "namespace": {
                    "type": "string"
                  },
                  "stopOnFailure": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              },
              "type": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "before": {
          "description": "Before steps is list of tests which will be sequentially orchestrated",
          "type": "array",
          "items": {
            "description": "TestSuiteStepSpec will of particular type will have config for possible step types",
            "type": "object",
            "properties": {
              "delay": {
                "description": "TestSuiteStepDelay contains step delay parameters",
                "type": "object",
                "properties": {
                  "duration": {
                    "description": "Duration in ms",
                    "type": "integer",
                    "format": "int32"
                  }
                },
                "additionalProperties": false
              },
              "execute": {
                "description": "TestSuiteStepExecute defines step to be executed",
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "namespace": {
                    "type": "string"
                  },
                  "stopOnFailure": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              },
              "type": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "description": {
          "type": "string"
        },
        "params": {
          "description": "DEPRECATED execution params passed to executor",
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "repeats": {
          "type": "integer"
        },
        "schedule": {
          "description": "schedule in cron job format for scheduled test execution",
          "type": "string"
        },
        "steps": {
          "description": "Steps is list of tests which will be sequentially orchestrated",
          "type": "array",
          "items": {
            "description": "TestSuiteStepSpec will of particular type will have config for possible step types",
            "type": "object",
            "properties": {
              "delay": {
                "description": "TestSuiteStepDelay contains step delay parameters",
                "type": "object",
                "properties": {
                  "duration": {
                    "description": "Duration in ms",
                    "type": "integer",
                    "format": "int32"
                  }
                },
                "additionalProperties": false
              },
              "execute": {
                "description": "TestSuiteStepExecute defines step to be executed",
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "namespace": {
                    "type": "string"
                  },
                  "stopOnFailure": {
                    "type": "boolean"
                  }
                },
                "additionalProperties": false
              },
              "type": {
                "type": "string"
              }
            },
            "additionalProperties": false
          }
        },
        "variables": {
          "description": "Variables are new params with secrets attached",
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "name": {
                "description": "variable name",
                "type": "string"
              },
              "type": {
                "description": "variable type",
                "type": "string"
              },
              "value": {
                "description": "variable string value",
                "type": "string"
              },
              "valueFrom": {
                "description": "or load it from var source",
                "type": "object",
                "properties": {
                  "configMapKeyRef": {
                    "description": "Selects a key of a ConfigMap.",
                    "type": "object",
                    "required": [
                      "key"
                    ],
                    "properties": {
                      "key": {
                        "description": "The key to select.",
                        "type": "string"
                      },
                      "name": {
                        "description": "Name of the referent.\nThis field is effectively required, but due to backwards compatibility is\nallowed to be empty. Instances of this type with an empty value here are\nalmost certainly wrong.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names",
                        "type": "string",
                        "default": ""
                      },
                      "optional": {
                        "description": "Specify whether the ConfigMap or its key must be defined",
                        "type": "boolean"
                      }
                    },
                    "x-kubernetes-map-type": "atomic"
                  },
                  "fieldRef": {
                    "description": "Selects a field of the pod: supports metadata.name, metadata.namespace, `metadata.labels['\u003cKEY\u003e']`, `metadata.annotations['\u003cKEY\u003e']`,\nspec.nodeName, spec.serviceAccountName, status.hostIP, status.podIP, status.podIPs.",
                    "type": "object",
                    "required": [
                      "fieldPath"
                    ],
                    "properties": {
                      "apiVersion": {
                        "description": "Version of the schema the FieldPath is written in terms of, defaults to \"v1\".",
                        "type": "string"
                      },
                      "fieldPath": {
                        "description": "Path of the field to select in the specified API version.",
                        "type": "string"
                      }
                    },
                    "x-kubernetes-map-type": "atomic"
                  },
                  "fileKeyRef": {
                    "description": "FileKeyRef selects a key of the env file.\nRequires the EnvFiles feature gate to be enabled.",
                    "type": "object",
                    "required": [
                      "key",
                      "path",
                      "volumeName"
                    ],
                    "properties": {
                      "key": {
                        "description": "The key within the env file. An invalid key will prevent the pod from starting.\nThe keys defined within a source may consist of any printable ASCII characters except '='.\nDuring Alpha stage of the EnvFiles feature gate, the key size is limited to 128 characters.",
                        "type": "string"
                      },
                      "optional": {
                        "description": "Specify whether the file or its key must be defined. If the file or key\ndoes not exist, then the env var is not published.\nIf optional is set to true and the specified key does not exist,\nthe environment variable will not be set in the Pod's containers.\n\nIf optional is set to false and the specified key does not exist,\nan error will be returned during Pod creation.",
                        "type": "boolean",
                        "default": false
                      },
                      "path": {
                        "description": "The path within the volume from which to select the file.\nMust be relative and may not contain the '..' path or start with '..'.",
                        "type": "string"
                      },
                      "volumeName": {
                        "description": "The name of the volume mount containing the env file.",
                        "type": "string"
                      }
                    },
                    "x-kubernetes-map-type": "atomic"
                  },
                  "resourceFieldRef": {
                    "description": "Selects a resource of the container: only resources limits and requests\n(limits.cpu, limits.memory, limits.ephemeral-storage, requests.cpu, requests.memory and requests.ephemeral-storage) are currently supported.",
                    "type": "object",
                    "required": [
                      "resource"
                    ],
                    "properties": {
                      "containerName": {
                        "description": "Container name: required for volumes, optional for env vars",
                        "type": "string"
                      },
                      "divisor": {
                        "description": "Specifies the output format of the exposed resources, defaults to \"1\"",
                        "pattern": "^(\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\\+|-)?(([0-9]+(\\.[0-9]*)?)|(\\.[0-9]+))))?$",
                        "anyOf": [
                          {
                            "type": "integer"
                          },
                          {
                            "type": "string"
                          }
                        ],
                        "x-kubernetes-int-or-string": true
                      },
                      "resource": {
                        "description": "Required: resource to select",
                        "type": "string"
                      }
                    },
                    "x-kubernetes-map-type": "atomic"
                  },
                  "secretKeyRef": {
                    "description": "Selects a key of a secret in the pod's namespace",
                    "type": "object",
                    "required": [
                      "key"
                    ],
                    "properties": {
                      "key": {
                        "description": "The key of the secret to select from.  Must be a valid secret key.",
                        "type": "string"
                      },
                      "name": {
                        "description": "Name of the referent.\nThis field is effectively required, but due to backwards compatibility is\nallowed to be empty. Instances of this type with an empty value here are\nalmost certainly wrong.\nMore info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names",
                        "type": "string",
                        "default": ""
                      },
                      "optional": {
                        "description": "Specify whether the Secret or its key must be defined",
                        "type": "boolean"
                      }
                    },
                    "x-kubernetes-map-type": "atomic"
                  }
                }
              }
            }
          }
        }
      },
      "additionalProperties": false
    },
    "status": {
      "description": "TestSuiteStatus defines the observed state of TestSuite",
      "type": "object"
    }
  }
}

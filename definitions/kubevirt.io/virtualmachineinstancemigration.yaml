apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: (devel)
  name: virtualmachineinstancemigrations.kubevirt.io
spec:
  group: kubevirt.io
  names:
    kind: VirtualMachineInstanceMigration
    listKind: VirtualMachineInstanceMigrationList
    plural: virtualmachineinstancemigrations
    singular: virtualmachineinstancemigration
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              addedNodeSelector:
                additionalProperties:
                  type: string
                type: object
              priority:
                type: string
              receive:
                properties:
                  migrationID:
                    type: string
                required:
                - migrationID
                type: object
              sendTo:
                properties:
                  connectURL:
                    type: string
                  migrationID:
                    type: string
                required:
                - connectURL
                - migrationID
                type: object
              vmiName:
                type: string
            type: object
          status:
            properties:
              conditions:
                items:
                  properties:
                    lastProbeTime:
                      format: date-time
                      nullable: true
                      type: string
                    lastTransitionTime:
                      format: date-time
                      nullable: true
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              migrationState:
                properties:
                  abortRequested:
                    type: boolean
                  abortStatus:
                    type: string
                  completed:
                    type: boolean
                  endTimestamp:
                    format: date-time
                    nullable: true
                    type: string
                  failed:
                    type: boolean
                  failureReason:
                    type: string
                  migrationConfiguration:
                    properties:
                      allowAutoConverge:
                        type: boolean
                      allowPostCopy:
                        type: boolean
                      allowWorkloadDisruption:
                        type: boolean
                      bandwidthPerMigration:
                        anyOf:
                        - type: integer
                        - type: string
                        pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                        x-kubernetes-int-or-string: true
                      completionTimeoutPerGiB:
                        format: int64
                        type: integer
                      disableTLS:
                        type: boolean
                      matchSELinuxLevelOnMigration:
                        type: boolean
                      network:
                        type: string
                      nodeDrainTaintKey:
                        type: string
                      parallelMigrationsPerCluster:
                        format: int32
                        type: integer
                      parallelOutboundMigrationsPerNode:
                        format: int32
                        type: integer
                      progressTimeout:
                        format: int64
                        type: integer
                      unsafeMigrationOverride:
                        type: boolean
                    type: object
                  migrationNetworkType:
                    type: string
                  migrationPolicyName:
                    type: string
                  migrationUid:
                    type: string
                  mode:
                    type: string
                  sourceNode:
                    type: string
                  sourcePersistentStatePVCName:
                    type: string
                  sourcePod:
                    type: string
                  sourceState:
                    properties:
                      domainName:
                        type: string
                      domainNamespace:
                        type: string
                      migrationUID:
                        type: string
                      node:
                        type: string
                      nodeSelectors:
                        additionalProperties:
                          type: string
                        type: object
                      persistentStatePVCName:
                        type: string
                      pod:
                        type: string
                      selinuxContext:
                        type: string
                      syncAddress:
                        type: string
                      virtualMachineInstanceUID:
                        type: string
                    type: object
                  startTimestamp:
                    format: date-time
                    nullable: true
                    type: string
                  targetAttachmentPodUID:
                    type: string
                  targetCPUSet:
                    items:
                      type: integer
                    type: array
                    x-kubernetes-list-type: atomic
                  targetDirectMigrationNodePorts:
                    additionalProperties:
                      type: integer
                    type: object
                  targetNode:
                    type: string
                  targetNodeAddress:
                    type: string
                  targetNodeDomainDetected:
                    type: boolean
                  targetNodeDomainReadyTimestamp:
                    format: date-time
                    type: string
                  targetNodeTopology:
                    type: string
                  targetPersistentStatePVCName:
                    type: string
                  targetPod:
                    type: string
                  targetState:
                    properties:
                      attachmentPodUID:
                        type: string
                      cpuSet:
                        items:
                          type: integer
                        type: array
                        x-kubernetes-list-type: atomic
                      directMigrationNodePorts:
                        additionalProperties:
                          type: integer
                        type: object
                      domainDetected:
                        type: boolean
                      domainName:
                        type: string
                      domainNamespace:
                        type: string
                      domainReadyTimestamp:
                        format: date-time
                        type: string
                      migrationUID:
                        type: string
                      node:
                        type: string
                      nodeAddress:
                        type: string
                      nodeTopology:
                        type: string
                      persistentStatePVCName:
                        type: string
                      pod:
                        type: string
                      selinuxContext:
                        type: string
                      syncAddress:
                        type: string
                      virtualMachineInstanceUID:
                        type: string
                    type: object
                type: object
              phase:
                type: string
              phaseTransitionTimestamps:
                items:
                  properties:
                    phase:
                      type: string
                    phaseTransitionTimestamp:
                      format: date-time
                      type: string
                  type: object
                type: array
                x-kubernetes-list-type: atomic
              synchronizationAddresses:
                items:
                  type: string
                type: array
                x-kubernetes-list-type: atomic
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true

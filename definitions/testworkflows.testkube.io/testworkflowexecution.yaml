apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: (devel)
  name: testworkflowexecutions.testworkflows.testkube.io
spec:
  group: testworkflows.testkube.io
  names:
    kind: TestWorkflowExecution
    listKind: TestWorkflowExecutionList
    plural: testworkflowexecutions
    singular: testworkflowexecution
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            properties:
              executionRequest:
                properties:
                  config:
                    additionalProperties:
                      anyOf:
                      - type: integer
                      - type: string
                      x-kubernetes-int-or-string: true
                    type: object
                  disableWebhooks:
                    type: boolean
                  name:
                    type: string
                  runningContext:
                    properties:
                      actor:
                        properties:
                          email:
                            type: string
                          executionId:
                            type: string
                          executionPath:
                            type: string
                          executionReference:
                            type: string
                          name:
                            type: string
                          type:
                            enum:
                            - cron
                            - testtrigger
                            - user
                            - testworkflow
                            - testworkflowexecution
                            - program
                            type: string
                        required:
                        - type
                        type: object
                      interface:
                        properties:
                          name:
                            type: string
                          type:
                            enum:
                            - cli
                            - ui
                            - api
                            - ci/cd
                            - internal
                            type: string
                        required:
                        - type
                        type: object
                    required:
                    - actor
                    - interface
                    type: object
                  tags:
                    additionalProperties:
                      type: string
                    type: object
                  target:
                    properties:
                      match:
                        additionalProperties:
                          items:
                            type: string
                          type: array
                        type: object
                      not:
                        additionalProperties:
                          items:
                            type: string
                          type: array
                        type: object
                      replicate:
                        items:
                          type: string
                        type: array
                    type: object
                  testWorkflowExecutionName:
                    type: string
                type: object
              testWorkflow:
                properties:
                  name:
                    default: ""
                    type: string
                type: object
                x-kubernetes-map-type: atomic
            required:
            - testWorkflow
            type: object
          status:
            properties:
              generation:
                format: int64
                type: integer
              latestExecution:
                properties:
                  disableWebhooks:
                    type: boolean
                  id:
                    type: string
                  name:
                    type: string
                  namespace:
                    type: string
                  number:
                    format: int32
                    type: integer
                  output:
                    items:
                      properties:
                        name:
                          type: string
                        ref:
                          type: string
                        value:
                          additionalProperties:
                            type: dynamicList
                          type: object
                      type: object
                    type: array
                  reports:
                    items:
                      properties:
                        file:
                          type: string
                        kind:
                          type: string
                        ref:
                          type: string
                        summary:
                          properties:
                            duration:
                              format: int64
                              type: integer
                            errored:
                              format: int32
                              type: integer
                            failed:
                              format: int32
                              type: integer
                            passed:
                              format: int32
                              type: integer
                            skipped:
                              format: int32
                              type: integer
                            tests:
                              format: int32
                              type: integer
                          type: object
                      type: object
                    type: array
                  resolvedWorkflow:
                    x-kubernetes-preserve-unknown-fields: true
                  resourceAggregations:
                    properties:
                      global:
                        additionalProperties:
                          additionalProperties:
                            properties:
                              avg: {}
                              max: {}
                              min: {}
                              stddev: {}
                              total: {}
                            type: object
                          type: object
                        type: object
                      step:
                        items:
                          properties:
                            aggregations:
                              additionalProperties:
                                additionalProperties:
                                  properties:
                                    avg: {}
                                    max: {}
                                    min: {}
                                    stddev: {}
                                    total: {}
                                  type: object
                                type: object
                              type: object
                            ref:
                              type: string
                          type: object
                        type: array
                    type: object
                  result:
                    properties:
                      duration:
                        type: string
                      durationMs:
                        format: int32
                        type: integer
                      finishedAt:
                        format: date-time
                        type: string
                      initialization:
                        properties:
                          errorMessage:
                            type: string
                          exitCode:
                            format: int64
                            type: integer
                          finishedAt:
                            format: date-time
                            type: string
                          queuedAt:
                            format: date-time
                            type: string
                          startedAt:
                            format: date-time
                            type: string
                          status:
                            type: string
                        type: object
                      pausedMs:
                        format: int32
                        type: integer
                      pauses:
                        items:
                          properties:
                            pausedAt:
                              format: date-time
                              type: string
                            ref:
                              type: string
                            resumedAt:
                              format: date-time
                              type: string
                          required:
                          - pausedAt
                          - ref
                          type: object
                        type: array
                      predictedStatus:
                        enum:
                        - queued
                        - running
                        - paused
                        - passed
                        - failed
                        - aborted
                        type: string
                      queuedAt:
                        format: date-time
                        type: string
                      startedAt:
                        format: date-time
                        type: string
                      status:
                        enum:
                        - queued
                        - running
                        - paused
                        - passed
                        - failed
                        - aborted
                        type: string
                      steps:
                        additionalProperties:
                          properties:
                            errorMessage:
                              type: string
                            exitCode:
                              format: int64
                              type: integer
                            finishedAt:
                              format: date-time
                              type: string
                            queuedAt:
                              format: date-time
                              type: string
                            startedAt:
                              format: date-time
                              type: string
                            status:
                              type: string
                          type: object
                        type: object
                      totalDuration:
                        type: string
                      totalDurationMs:
                        format: int32
                        type: integer
                    required:
                    - predictedStatus
                    - status
                    type: object
                  runningContext:
                    properties:
                      actor:
                        properties:
                          email:
                            type: string
                          executionId:
                            type: string
                          executionPath:
                            type: string
                          executionReference:
                            type: string
                          name:
                            type: string
                          type:
                            enum:
                            - cron
                            - testtrigger
                            - user
                            - testworkflow
                            - testworkflowexecution
                            - program
                            type: string
                        required:
                        - type
                        type: object
                      interface:
                        properties:
                          name:
                            type: string
                          type:
                            enum:
                            - cli
                            - ui
                            - api
                            - ci/cd
                            - internal
                            type: string
                        required:
                        - type
                        type: object
                    required:
                    - actor
                    - interface
                    type: object
                  scheduledAt:
                    format: date-time
                    type: string
                  signature:
                    items:
                      properties:
                        category:
                          type: string
                        children:
                          x-kubernetes-preserve-unknown-fields: true
                        name:
                          type: string
                        negative:
                          type: boolean
                        optional:
                          type: boolean
                        ref:
                          type: string
                      type: object
                    type: array
                  statusAt:
                    format: date-time
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    type: object
                  testWorkflowExecutionName:
                    type: string
                  workflow:
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - id
                - name
                - workflow
                type: object
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}

---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
  creationTimestamp: null
  name: connectclusters.cluster.cpc.platform.confluent.io
spec:
  group: cluster.cpc.platform.confluent.io
  names:
    categories:
    - all
    - confluent
    - cpc
    - cpccluster
    kind: ConnectCluster
    listKind: ConnectClusterList
    plural: connectclusters
    shortNames:
    - cc
    - connectcluster
    singular: connectcluster
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.ready
      name: Ready
      type: string
    - jsonPath: .status.targetCluster
      name: Target-Cluster
      type: string
    - jsonPath: .status.clusterState
      name: Cluster-State
      type: string
    - jsonPath: .status.kubernetesCluster
      name: K8s
      type: string
    - jsonPath: .status.confluentPlatformBlueprint
      name: Blueprint
      type: string
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: ConnectCluster is the Schema for connect clusters API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ConnectClusterSpec defines the desired state of ConnectCluster
            properties:
              blueprintRef:
                description: blueprintRef defines which blueprint connect cluster
                  should use.
                properties:
                  name:
                    description: Name is the name of the referenced CR
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  namespace:
                    description: Namespace of the CR. Defaults to the current namespace
                      of the CR making the reference
                    maxLength: 255
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - name
                type: object
              build:
                description: build specifies the build configurations for connector
                  plugins.
                properties:
                  static:
                    description: static specifies the configurations for static plugins
                      build.
                    properties:
                      plugins:
                        description: plugins specifies the reference name of the plugins
                          from blueprint.
                        items:
                          properties:
                            name:
                              description: name specifies the plugin name. You can
                                check the supported plugins from the connectCluster
                                status.
                              minLength: 1
                              type: string
                          required:
                          - name
                          type: object
                        type: array
                    required:
                    - plugins
                    type: object
                  type:
                    description: type specifies the build type for connector plugins.
                      Currently only the `static` type is supported.
                    enum:
                    - static
                    type: string
                required:
                - static
                - type
                type: object
              credentialStoreConfigRef:
                description: credentialStoreConfigRef references the CredentialStoreConfig
                  CR that manages credentials across CP
                properties:
                  name:
                    description: Name is the name of the referenced CR
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  namespace:
                    description: Namespace of the CR. Defaults to the current namespace
                      of the CR making the reference
                    maxLength: 255
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - name
                type: object
              dependencies:
                description: ConnectClusterDependencies describes the component connect
                  cluster has a client dependency on
                properties:
                  kafkaClusterRef:
                    description: kafkaClusterRef references to Kafka cluster for connect
                      cluster to connect.
                    properties:
                      name:
                        description: Name is the name of the referenced CR
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      namespace:
                        description: Namespace of the CR. Defaults to the current
                          namespace of the CR making the reference
                        maxLength: 255
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                    required:
                    - name
                    type: object
                  mdsClusterRef:
                    description: mdsClusterRef references the mds cluster connect
                      cluster will connect to. If not configured for CP RBAC scenario,
                      it will piggyback to the same kafka cluster connect cluster
                      points to.
                    properties:
                      name:
                        description: Name is the name of the referenced CR
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      namespace:
                        description: Namespace of the CR. Defaults to the current
                          namespace of the CR making the reference
                        maxLength: 255
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                    required:
                    - name
                    type: object
                  schemaRegistryClusterRef:
                    description: schemaRegistryClusterRef is the cluster which will
                      be used to enforce schema validation.
                    properties:
                      name:
                        description: Name is the name of the referenced CR
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      namespace:
                        description: Namespace of the CR. Defaults to the current
                          namespace of the CR making the reference
                        maxLength: 255
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                    required:
                    - name
                    type: object
                type: object
              externalAccess:
                description: externalAccess specifies the external access configurations
                  for this cluster.
                properties:
                  dnsConfig:
                    description: dnsConfig specifies the DNS configurations for HTTP
                      external access.
                    properties:
                      subdomain:
                        description: subdomain specifies the subdomain for the cluster
                          FQDN.
                        type: string
                    type: object
                  tlsConfig:
                    description: tlsConfig specifies the tls configuration for HTTP
                      external access.
                    properties:
                      certificateStoreConfigRef:
                        description: certificateStoreConfigRef specifies the reference
                          to CertificateStoreConfig.
                        properties:
                          name:
                            description: Name is the name of the referenced CR
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          namespace:
                            description: Namespace of the CR. Defaults to the current
                              namespace of the CR making the reference
                            maxLength: 255
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                        required:
                        - name
                        type: object
                    required:
                    - certificateStoreConfigRef
                    type: object
                type: object
              k8sClusterRef:
                description: k8sClusterRef references to kubernetes clusters where
                  connect going to be deployed. Needs to be specified when cluster
                  is provisioned by cfk.
                properties:
                  name:
                    description: Name is the name of the referenced CR
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  namespace:
                    description: Namespace of the CR. Defaults to the current namespace
                      of the CR making the reference
                    maxLength: 255
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - name
                type: object
              replicas:
                description: replicas is the number of replicas for the cluster. If
                  configured, the value will be checked against the blueprint's max
                  replicas. If not, it will use the default configured in blueprint.
                format: int32
                type: integer
              targetCluster:
                description: targetCluster defines where connect cluster should be
                  deployed. Only required in a multi-cluster deployment mode to manage
                  connect cluster name and namespace.
                properties:
                  name:
                    description: Name is the name of the referenced CR
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  namespace:
                    description: Namespace of the CR. Defaults to the current namespace
                      of the CR making the reference
                    maxLength: 255
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - name
                type: object
            required:
            - blueprintRef
            type: object
          status:
            description: ConnectClusterStatus defines the observed state of ConnectCluster
            properties:
              classGeneration:
                description: classGeneration is the generation version of the cluster
                  class referenced from the deployment.
                format: int64
                type: integer
              clusterClass:
                description: clusterClass is the namespaced name of the ClusterClass
                  that this deployment object is referencing to.
                type: string
              clusterState:
                default: Unknown
                description: clusterState is the state of the cluster.
                type: string
              conditions:
                description: conditions specify the latest available observations
                  of the current state.
                items:
                  description: Condition represents the latest available observations
                    of the current state.
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime shows the last time the condition
                        was transitioned from one status to another.
                      format: date-time
                      type: string
                    lastUpdateTime:
                      description: lastUpdateTime shows the last time the condition
                        was evaluated.
                      format: date-time
                      type: string
                    message:
                      description: message shows a human-readable message with details
                        about the transition.
                      type: string
                    reason:
                      description: reason shows the reason for the last transition
                        of the condition.
                      type: string
                    status:
                      description: status shows the status of the condition, one of
                        `True`, `False`, or `Unknown`.
                      type: string
                    type:
                      description: type shows the condition type.
                      type: string
                  required:
                  - type
                  type: object
                type: array
              confluentPlatformBlueprint:
                description: confluentPlatformBlueprint is the namespaced name of
                  the confluentPlatformBlueprint referenced from the deployment.
                type: string
              confluentPlatformBlueprintGeneration:
                description: confluentPlatformBlueprintGeneration is the generation
                  version of the confluentPlatformBlueprint referenced from the deployment.
                format: int64
                type: integer
              connectClusterId:
                description: connectClusterId describes the ID of connect cluster.
                type: string
              currentReplicas:
                description: currentReplicas is the number of currently running replicas.
                format: int32
                type: integer
              externalAccess:
                description: externalAccess is the external access status of this
                  cluster.
                properties:
                  advertisedExternalEndpoint:
                    description: advertisedExternalEndpoint is the advertised endpoint
                      for the http server of this cluster.
                    properties:
                      dnsEndpoint:
                        description: dnsEndpoint is the endpoint with FQDN and port
                          number, with format `<FQDN>:<port>`.
                        type: string
                      ipAddress:
                        description: ipAddress is the assigned ip address for the
                          FQDN.
                        type: string
                      url:
                        description: url is the URL endpoint. The format is `http|s://<FQDN>:<port>`.
                        minLength: 1
                        pattern: ^https?://.*
                        type: string
                    type: object
                  type:
                    description: type is the external access type.
                    enum:
                    - loadBalancer
                    - ingress
                    - nodePort
                    - route
                    type: string
                type: object
              installedConnectorPlugins:
                description: installedConnectorPlugins specifies the installed connector
                  plugins.
                items:
                  description: ConnectorPluginStatus defines the state of the connector
                    plugin.
                  properties:
                    class:
                      description: class specifies the class name of the connector
                        plugin.
                      type: string
                    type:
                      description: type is the connector plugin type, which can be
                        `SOURCE`, `SINK` or `UNKNOWN`.
                      type: string
                    version:
                      description: version is the current version of the connector
                        plugin.
                      type: string
                  required:
                  - class
                  type: object
                type: array
              internalSecretName:
                description: internalSecretName is the name of the CPC internal secret
                  created for this cluster
                type: string
              internalTopicReplicationFactor:
                description: internalTopicReplicationFactor is the replication factor
                  of schemaRegistry internal topics.
                format: int32
                type: integer
              kafkaClusterRef:
                description: kafkaClusterRef references to Kafka cluster
                type: string
              kubernetesCluster:
                description: kubernetesCluster is the namespaced name of the  kubernetesCluster
                  CR that is the deployment is provisioned to.
                type: string
              maxReplicas:
                description: maxReplicas is the max number of replicas.
                format: int32
                type: integer
              mdsClusterRef:
                description: mdsClusterRef references mds cluster
                type: string
              observedGeneration:
                description: observedGeneration is the most recent generation observed
                  for this cluster.
                format: int64
                type: integer
              phase:
                default: Unknown
                description: phase describes whether the internal state is generated.
                  Values are Bound, Pending and Unknown.
                type: string
              provisionerType:
                description: provisionerType is the type of underlying resource for
                  the cluster
                enum:
                - cfk
                - ccloud
                type: string
              ready:
                description: 'ready is the number of ready replicas based on the desired
                  replicas. The value is in the following format: `readyReplicas/replicas`.'
                type: string
              readyReplicas:
                description: readyReplicas is the number of currently ready replicas.
                format: int32
                type: integer
              replicas:
                description: replicas is the number of replicas.
                format: int32
                type: integer
              schemaRegistryClusterRef:
                description: schemaRegistryClusterRef references schemaRegistry cluster
                type: string
              supportedConnectorPlugins:
                description: supportedConnectorPlugins specifies the connector plugins
                  can be installed in this Connect cluster. To install any of them
                  in this connector, please specify in the `.spec.build` section.
                items:
                  description: SupportedConnectorPlugin is the information of supported
                    connector plugin.
                  properties:
                    locationType:
                      description: locationType is the locationType of the supported
                        connector plugin.
                      type: string
                    name:
                      description: name is the name of the supported connector plugin.
                      type: string
                    version:
                      description: version is the version of the supported connector
                        plugin.
                      type: string
                  type: object
                type: array
              targetCluster:
                description: targetCluster is the namespaced name of the cluster that
                  is created from the deployment.
                type: string
              tls:
                description: tls shows whether TLS is configured for this cluster.
                properties:
                  enabled:
                    description: enabled specifies whether tls is enabled.
                    type: boolean
                type: object
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      scale:
        specReplicasPath: .spec.replicas
        statusReplicasPath: .status.replicas
      status: {}


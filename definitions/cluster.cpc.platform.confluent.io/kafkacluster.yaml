---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
  creationTimestamp: null
  name: kafkaclusters.cluster.cpc.platform.confluent.io
spec:
  group: cluster.cpc.platform.confluent.io
  names:
    categories:
    - all
    - confluent
    - cpc
    - cpccluster
    kind: KafkaCluster
    listKind: KafkaClusterList
    plural: kafkaclusters
    shortNames:
    - kc
    - kafkacluster
    singular: kafkacluster
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.ready
      name: Ready
      type: string
    - jsonPath: .status.targetCluster
      name: Target-Cluster
      type: string
    - jsonPath: .status.clusterState
      name: Cluster-State
      type: string
    - jsonPath: .status.kubernetesCluster
      name: K8s
      type: string
    - jsonPath: .status.confluentPlatformBlueprint
      name: Blueprint
      type: string
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: KafkaCluster is the Schema for the kafkaclusters API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: KafkaClusterSpec defines the desired state of KafkaCluster
            properties:
              blueprintRef:
                description: blueprintRef defines which blueprint the Kafka cluster
                  should use.
                properties:
                  name:
                    description: Name is the name of the referenced CR
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  namespace:
                    description: Namespace of the CR. Defaults to the current namespace
                      of the CR making the reference
                    maxLength: 255
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - name
                type: object
              credentialStoreConfigRef:
                description: credentialStoreConfigRef references the CredentialStoreConfig
                  CR that manages credentials across CP
                properties:
                  name:
                    description: Name is the name of the referenced CR
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  namespace:
                    description: Namespace of the CR. Defaults to the current namespace
                      of the CR making the reference
                    maxLength: 255
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - name
                type: object
              dataVolumeCapacity:
                anyOf:
                - type: integer
                - type: string
                description: dataVolumeCapacity will resize the existing volume. If
                  value is less or greater than the value the configured by the class
                  (platform administrator) then the request will be rejected. The
                  webhook will be in place to let user know if the request will be
                  denied
                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                x-kubernetes-int-or-string: true
              dependencies:
                description: dependencies describes the services which kafka has a
                  client dependency on
                properties:
                  mdsClusterRef:
                    description: mdsClusterRef is the cluster which Kafka will use
                      for metadata. This will be the primary MDS.
                    properties:
                      name:
                        description: Name is the name of the referenced CR
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      namespace:
                        description: Namespace of the CR. Defaults to the current
                          namespace of the CR making the reference
                        maxLength: 255
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                    required:
                    - name
                    type: object
                  metricsReporter:
                    description: metricsReporter configures where to send metrics
                      to.
                    properties:
                      kafkaClusterRef:
                        description: kafkaClusterRef is the cluster which the metrics
                          reporter will report metrics to.
                        properties:
                          name:
                            description: Name is the name of the referenced CR
                            maxLength: 63
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                          namespace:
                            description: Namespace of the CR. Defaults to the current
                              namespace of the CR making the reference
                            maxLength: 255
                            minLength: 1
                            pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                            type: string
                        required:
                        - name
                        type: object
                    type: object
                  schemaRegistryClusterRef:
                    description: schemaRegistryClusterRef is the cluster which will
                      be used to enforce schema validation.
                    properties:
                      name:
                        description: Name is the name of the referenced CR
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      namespace:
                        description: Namespace of the CR. Defaults to the current
                          namespace of the CR making the reference
                        maxLength: 255
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                    required:
                    - name
                    type: object
                  zookeeperClusterRef:
                    description: zookeeperClusterRef specifies the dependency configuration
                      for Zookeeper.
                    properties:
                      name:
                        description: Name is the name of the referenced CR
                        maxLength: 63
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                      namespace:
                        description: Namespace of the CR. Defaults to the current
                          namespace of the CR making the reference
                        maxLength: 255
                        minLength: 1
                        pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                        type: string
                    required:
                    - name
                    type: object
                type: object
              externalAccess:
                description: externalAccess specifies Kafka external access configurations.
                properties:
                  kafkaRest:
                    description: kafkaRest specifies the external access configurations
                      for Kafka Rest endpoints.
                    properties:
                      dnsConfig:
                        description: dnsConfig specifies the DNS configurations for
                          Kafka Rest endpoints.
                        properties:
                          subdomain:
                            description: subdomain specifies the subdomain for the
                              cluster FQDN.
                            type: string
                        type: object
                      tlsConfig:
                        description: tlsConfig specifies the tls certificate configuration
                          for external communication. Only apply to certificate provider
                          type `deployment`.
                        properties:
                          certificateStoreConfigRef:
                            description: certificateStoreConfigRef specifies the reference
                              to CertificateStoreConfig.
                            properties:
                              name:
                                description: Name is the name of the referenced CR
                                maxLength: 63
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                type: string
                              namespace:
                                description: Namespace of the CR. Defaults to the
                                  current namespace of the CR making the reference
                                maxLength: 255
                                minLength: 1
                                pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                type: string
                            required:
                            - name
                            type: object
                        required:
                        - certificateStoreConfigRef
                        type: object
                    type: object
                  listeners:
                    description: listeners specifies the external access configurations
                      for Kafka listeners.
                    properties:
                      custom:
                        description: custom defines the list of KafkaListenerExternalAccess
                          configuration.
                        items:
                          properties:
                            dnsConfig:
                              description: dnsConfig specifies the DNS configuration
                                for Kafka Listener external access. This is required
                                if subdomain provider type is deployment in blueprint.
                              properties:
                                bootstrapSubdomain:
                                  description: bootstrapSubdomain specifies the subdomain
                                    for the Kafka bootstrap advertised endpoint. This
                                    is required if subdomain provider type is deployment
                                    in blueprint.
                                  minLength: 1
                                  type: string
                                brokerSubdomain:
                                  description: brokerSubdomain specifies the subdomain
                                    for the Kafka broker advertised endpoint. This
                                    is required if subdomain provider type is deployment
                                    in blueprint.
                                  minLength: 1
                                  type: string
                              type: object
                            name:
                              description: name specifies the name of the custom listener.
                                `internal`, `external`, `replication` and `token`
                                are reserved and can't be used for this property.
                              maxLength: 30
                              minLength: 1
                              pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                              type: string
                            tlsConfig:
                              description: tlsConfig specifies the tls certificate
                                configuration for external communication. Only apply
                                to certificate provider type `deployment`.
                              properties:
                                certificateStoreConfigRef:
                                  description: certificateStoreConfigRef specifies
                                    the reference to CertificateStoreConfig.
                                  properties:
                                    name:
                                      description: Name is the name of the referenced
                                        CR
                                      maxLength: 63
                                      minLength: 1
                                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                      type: string
                                    namespace:
                                      description: Namespace of the CR. Defaults to
                                        the current namespace of the CR making the
                                        reference
                                      maxLength: 255
                                      minLength: 1
                                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                      type: string
                                  required:
                                  - name
                                  type: object
                              required:
                              - certificateStoreConfigRef
                              type: object
                          required:
                          - name
                          type: object
                        type: array
                      external:
                        description: external specifies the configuration for Kafka
                          external listener external access.
                        properties:
                          dnsConfig:
                            description: dnsConfig specifies the DNS configuration
                              for Kafka Listener external access. This is required
                              if subdomain provider type is deployment in blueprint.
                            properties:
                              bootstrapSubdomain:
                                description: bootstrapSubdomain specifies the subdomain
                                  for the Kafka bootstrap advertised endpoint. This
                                  is required if subdomain provider type is deployment
                                  in blueprint.
                                minLength: 1
                                type: string
                              brokerSubdomain:
                                description: brokerSubdomain specifies the subdomain
                                  for the Kafka broker advertised endpoint. This is
                                  required if subdomain provider type is deployment
                                  in blueprint.
                                minLength: 1
                                type: string
                            type: object
                          tlsConfig:
                            description: tlsConfig specifies the tls certificate configuration
                              for external communication. Only apply to certificate
                              provider type `deployment`.
                            properties:
                              certificateStoreConfigRef:
                                description: certificateStoreConfigRef specifies the
                                  reference to CertificateStoreConfig.
                                properties:
                                  name:
                                    description: Name is the name of the referenced
                                      CR
                                    maxLength: 63
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                  namespace:
                                    description: Namespace of the CR. Defaults to
                                      the current namespace of the CR making the reference
                                    maxLength: 255
                                    minLength: 1
                                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                                    type: string
                                required:
                                - name
                                type: object
                            required:
                            - certificateStoreConfigRef
                            type: object
                        type: object
                    type: object
                type: object
              k8sClusterRef:
                description: k8sClusterRef references to kubernetes clusters where
                  kafka going to be deployed. If missing then the cpc-validator webhook
                  will inject default kubernetes cluster and will assume both Control
                  and data plane service are running in the mothership cluster.
                properties:
                  name:
                    description: Name is the name of the referenced CR
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  namespace:
                    description: Namespace of the CR. Defaults to the current namespace
                      of the CR making the reference
                    maxLength: 255
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - name
                type: object
              replicas:
                description: replicas is the number of replicas for the cluster. If
                  configured, the value will be checked against the KafkaClusterClass
                  configuration max replicas. If not, it will use the default in the
                  KafkaClusterClass.
                format: int32
                type: integer
              targetCluster:
                description: targetCluster defines where the kafka cluster should
                  be deployed.
                properties:
                  name:
                    description: Name is the name of the referenced CR
                    maxLength: 63
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                  namespace:
                    description: Namespace of the CR. Defaults to the current namespace
                      of the CR making the reference
                    maxLength: 255
                    minLength: 1
                    pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                    type: string
                required:
                - name
                type: object
            required:
            - blueprintRef
            type: object
          status:
            description: KafkaClusterStatus defines the observed state of KafkaCluster
            properties:
              brokerOffsetInterval:
                description: brokerOffsetInterval is the offset interval for the kafka
                  broker numbers.
                type: string
              classGeneration:
                description: classGeneration is the generation version of the cluster
                  class referenced from the deployment.
                format: int64
                type: integer
              clusterClass:
                description: clusterClass is the namespaced name of the ClusterClass
                  that this deployment object is referencing to.
                type: string
              clusterState:
                default: Unknown
                description: clusterState is the state of the cluster.
                type: string
              conditions:
                description: conditions specify the latest available observations
                  of the current state.
                items:
                  description: Condition represents the latest available observations
                    of the current state.
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime shows the last time the condition
                        was transitioned from one status to another.
                      format: date-time
                      type: string
                    lastUpdateTime:
                      description: lastUpdateTime shows the last time the condition
                        was evaluated.
                      format: date-time
                      type: string
                    message:
                      description: message shows a human-readable message with details
                        about the transition.
                      type: string
                    reason:
                      description: reason shows the reason for the last transition
                        of the condition.
                      type: string
                    status:
                      description: status shows the status of the condition, one of
                        `True`, `False`, or `Unknown`.
                      type: string
                    type:
                      description: type shows the condition type.
                      type: string
                  required:
                  - type
                  type: object
                type: array
              confluentPlatformBlueprint:
                description: confluentPlatformBlueprint is the namespaced name of
                  the confluentPlatformBlueprint referenced from the deployment.
                type: string
              confluentPlatformBlueprintGeneration:
                description: confluentPlatformBlueprintGeneration is the generation
                  version of the confluentPlatformBlueprint referenced from the deployment.
                format: int64
                type: integer
              currentReplicas:
                description: currentReplicas is the number of currently running replicas.
                format: int32
                type: integer
              dataVolumeSize:
                anyOf:
                - type: integer
                - type: string
                description: dataVolumeSize describes the volume size in use by the
                  application.
                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                x-kubernetes-int-or-string: true
              internalSecretName:
                description: internalSecretName is the name of the CPC internal secret
                  created for this cluster
                type: string
              kafkaClusterID:
                description: kafkaClusterID is the cluster-id of the kafka-cluster
                type: string
              kafkaRestClassName:
                description: kafkaRestClassName references to internal kafkaRestClass
                  name
                type: string
              kafkaRestRef:
                description: kafkaRestRef is the status for Kafka Rest APIs or MDS.
                properties:
                  externalAccess:
                    description: externalAccess is the status of Kafka Rest external
                      Access.
                    properties:
                      advertisedExternalEndpoint:
                        description: advertisedExternalEndpoint is the advertised
                          endpoint for the http server of this cluster.
                        properties:
                          dnsEndpoint:
                            description: dnsEndpoint is the endpoint with FQDN and
                              port number, with format `<FQDN>:<port>`.
                            type: string
                          ipAddress:
                            description: ipAddress is the assigned ip address for
                              the FQDN.
                            type: string
                          url:
                            description: url is the URL endpoint. The format is `http|s://<FQDN>:<port>`.
                            minLength: 1
                            pattern: ^https?://.*
                            type: string
                        type: object
                      type:
                        description: type is the external access type.
                        enum:
                        - loadBalancer
                        - ingress
                        - nodePort
                        - route
                        type: string
                    type: object
                  tls:
                    description: tls shows whether TLS is configured for the Kafka
                      Rest endpoint.
                    properties:
                      enabled:
                        description: enabled specifies whether tls is enabled.
                        type: boolean
                    type: object
                type: object
              kubernetesCluster:
                description: kubernetesCluster is the namespaced name of the  kubernetesCluster
                  CR that is the deployment is provisioned to.
                type: string
              listeners:
                description: listeners are the list of Kafka listener Statuses.
                items:
                  properties:
                    externalAccess:
                      description: externalAccess is the external access status of
                        this listener.
                      properties:
                        advertisedExternalEndpoint:
                          description: advertisedExternalEndpoint is the advertised
                            endpoint for this listener.
                          properties:
                            bootstrap:
                              description: bootstrap is the bootstrap advertised endpoint.
                              properties:
                                dnsEndpoint:
                                  description: dnsEndpoint is the endpoint with FQDN
                                    and port number, with format `<FQDN>:<port>`.
                                  type: string
                                ipAddress:
                                  description: ipAddress is the assigned ip address
                                    for the FQDN.
                                  type: string
                              type: object
                            broker:
                              description: broker is the list of broker advertised
                                endpoint.
                              items:
                                properties:
                                  dnsEndpoint:
                                    description: dnsEndpoint is the endpoint with
                                      FQDN and port number, with format `<FQDN>:<port>`.
                                    type: string
                                  ipAddress:
                                    description: ipAddress is the assigned ip address
                                      for the FQDN.
                                    type: string
                                  name:
                                    description: name is the broker name.
                                    type: string
                                type: object
                              type: array
                          type: object
                        type:
                          description: type is the external access type.
                          enum:
                          - loadBalancer
                          - ingress
                          - nodePort
                          - route
                          type: string
                      type: object
                    name:
                      description: name is the listener name.
                      type: string
                    tls:
                      description: tls shows whether TLS is configured for the listener.
                      properties:
                        enabled:
                          description: enabled specifies whether tls is enabled.
                          type: boolean
                      type: object
                  type: object
                type: array
              maxReplicas:
                description: maxReplicas is the max number of replicas.
                format: int32
                type: integer
              observedGeneration:
                description: observedGeneration is the most recent generation observed
                  for this cluster.
                format: int64
                type: integer
              passwordEncoder:
                description: passwordEncoder whether passwordEncoder is enabled this
                  feature must be enabled for clusterlink to work.
                type: boolean
              phase:
                default: Unknown
                description: phase describes whether the internal state is generated.
                  Values are Bound, Pending and Unknown.
                type: string
              provisionerType:
                description: provisionerType is the type of underlying resource for
                  the cluster
                enum:
                - cfk
                - ccloud
                type: string
              ready:
                description: 'ready is the number of ready replicas based on the desired
                  replicas. The value is in the following format: `readyReplicas/replicas`.'
                type: string
              readyReplicas:
                description: readyReplicas is the number of currently ready replicas.
                format: int32
                type: integer
              replicas:
                description: replicas is the number of replicas.
                format: int32
                type: integer
              schemaRegistryClusterRef:
                description: schemaRegistryClusterRef references schemaRegistry cluster
                type: string
              targetCluster:
                description: targetCluster is the namespaced name of the cluster that
                  is created from the deployment.
                type: string
              zookeeperClusterRef:
                description: zookeeperClusterRef references zookeeper cluster
                type: string
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      scale:
        specReplicasPath: .spec.replicas
        statusReplicasPath: .status.replicas
      status: {}

